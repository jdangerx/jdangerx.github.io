<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>No Promises</title><link href="http://www.johnxia.me/" rel="alternate"></link><link href="http://www.johnxia.me/feeds/all.atom.xml" rel="self"></link><id>http://www.johnxia.me/</id><updated>2015-01-10T00:00:00-06:00</updated><entry><title>Principles of Planetary Climate, Chapter 1 Workbook</title><link href="http://www.johnxia.me/principles-of-planetary-climate-chapter-1-workbook.html" rel="alternate"></link><updated>2015-01-10T00:00:00-06:00</updated><author><name>John Xia</name></author><id>tag:www.johnxia.me,2015-01-10:principles-of-planetary-climate-chapter-1-workbook.html</id><summary type="html">&lt;script type="text/javascript"
  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"&gt;
&lt;/script&gt;

&lt;script type="text/x-mathjax-config"&gt;
MathJax.Hub.Config({
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
});
&lt;/script&gt;

&lt;script type="text/javascript" src="path-to-mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"&gt;&lt;/script&gt;

&lt;h1&gt;Chapter 1 Workbook&lt;/h1&gt;
&lt;p&gt;These are my solutions to the Chapter 1 problems of &lt;a href="http://www.amazon.com/gp/product/0521865565/"&gt;Principles of
Planetary Climate&lt;/a&gt;. I
make no claims as to their accuracy, but if you are interested in
seeing what I've done go right ahead.&lt;/p&gt;
&lt;p&gt;First we have some imports and useful constants. Python doesn't have a
built-in sign function, so we have a simple implementation here
also. I've imported seaborn, which is an interesting graphing library
built on top of matplotlib. It does a lot of fancy things we don't
need, but importing it also makes all matplotlib graphs look nicer.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;math&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kp"&gt;log2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;pi&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kp"&gt;log&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;functools&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;partial&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;pandas&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;pd&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;numpy&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;np&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;seaborn&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;sns&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;matplotlib.pyplot&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;plt&lt;/span&gt;

&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;scipy.integrate&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;romb&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;quad&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;odeint&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;scipy.interpolate&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;InterpolatedUnivariateSpline&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;scipy.misc&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;derivative&lt;/span&gt;


&lt;span class="c"&gt;# gravitational constant&lt;/span&gt;
&lt;span class="n"&gt;G&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mf"&gt;6.67e-11&lt;/span&gt;

&lt;span class="c"&gt;# mass of the earth&lt;/span&gt;
&lt;span class="n"&gt;M_e&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mf"&gt;6e24&lt;/span&gt;

&lt;span class="c"&gt;# radius of earth, in m&lt;/span&gt;
&lt;span class="n"&gt;r_earth&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;6378100&lt;/span&gt;

&lt;span class="c"&gt;# surface area of earth&lt;/span&gt;
&lt;span class="n"&gt;sa_e&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;pi&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;r_earth&lt;/span&gt;&lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;

&lt;span class="n"&gt;seconds_per_year&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;60&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;60&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;24&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;365&lt;/span&gt;

&lt;span class="c"&gt;#VSMOW&lt;/span&gt;
&lt;span class="n"&gt;O18_p_O16&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mf"&gt;498.7&lt;/span&gt;  
&lt;span class="n"&gt;D_p_H&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;6420&lt;/span&gt;


&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;sign&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nb"&gt;abs&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;except&lt;/span&gt; &lt;span class="ne"&gt;ZeroDivisionError&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;


&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="n"&gt;matplotlib&lt;/span&gt; &lt;span class="n"&gt;inline&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Problem 1.&lt;/h3&gt;
&lt;p&gt;This is pretty simple. We just need to plot a function. You can do
basic math on NumPy arrays, which is pretty sweet.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;def luminosity(ages, t0=4.6e9):
    return (1 / (1 + 0.4 * (1 - ages/t0)))

def problem1():
    ages = np.linspace(0, 5e9, 100)
    luminosities = luminosity(ages)
    plt.figure(figsize=(12,9))
    plt.title(&amp;quot;Luminosity vs. age of the Sun&amp;quot;)
    plt.plot(ages, luminosities)
    plt.xlabel(&amp;quot;Age (billions of years)&amp;quot;)
    plt.ylabel(&amp;quot;Luminosity as a fraction of current day&amp;quot;)

problem1()
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="png" src="images/ch1_files/ch1_3_0.png" /&gt;&lt;/p&gt;
&lt;h3&gt;Problem 2.&lt;/h3&gt;
&lt;p&gt;What was initially just a simple file IO example was complicated by
some interesting encoding issues. The Vostok ice core data was
unreadable with UTF-8. So I opened the file in Firefox - some of the
scientists' names were rendered improperly. I played with the encoding
until it worked - unfortunately it was just listed in Firefox as
"Western." I then looked up what possible encodings I could use and
used the one labeled "Western Europe."&lt;/p&gt;
&lt;p&gt;Additionally the C CSV parsing engine was having issues using the
&lt;code&gt;delim_whitespace&lt;/code&gt; option, so I had to specify the Python engine
instead. Fortunately this dataset was pretty small (about 3000 lines)
so the speed hit wasn't really important.&lt;/p&gt;
&lt;p&gt;I thought that having a line connecting the data points hid the
decrease in data density as ice age increases, so I made it with
points instead.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;def problem2():
    vostokT = pd.read_csv(&amp;quot;data/Chapter1Data/iceCores/vostokT.txt&amp;quot;,
                          skiprows=115, 
                          encoding=&amp;#39;iso8859_15&amp;#39;, # &amp;quot;Western&amp;quot; encoding
                          delimiter=&amp;#39;\s&amp;#39;,
                          engine=&amp;quot;python&amp;quot;)
    plt.figure(figsize=(12,8))
    plt.title(&amp;quot;Temperature change vs. ice age&amp;quot;)
    plt.plot(vostokT.corrected_Ice_age_GT4, vostokT.deltaTS,
             marker=&amp;quot;.&amp;quot;, linestyle=&amp;quot;none&amp;quot;)
    plt.xlabel(&amp;quot;Ice age (years)&amp;quot;)
    plt.ylabel(&amp;quot;Temperature difference from present (C)&amp;quot;)
    plt.figure(figsize=(12,8))
    plt.title(&amp;quot;Depth vs. ice age&amp;quot;)
    plt.plot(vostokT.corrected_Ice_age_GT4, vostokT.Depth,
             marker=&amp;quot;.&amp;quot;, linestyle=&amp;quot;none&amp;quot;)
    plt.xlabel(&amp;quot;Ice age (years)&amp;quot;)
    plt.ylabel(&amp;quot;Ice core depth (m)&amp;quot;)
problem2()
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="png" src="images/ch1_files/ch1_5_0.png" /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="png" src="images/ch1_files/ch1_5_1.png" /&gt;&lt;/p&gt;
&lt;h3&gt;Problem 3.&lt;/h3&gt;
&lt;p&gt;This was an exercise in doing arithmetic on columns of data. I wanted
to try the Pandas DataFrames out. In this example I'm just using them
as a dict to store NumPy arrays, but there's a bunch of other cool
stuff they can do. Later I find the standard deviation of a column
with a method call on the DataFrame, which is pretty slick.&lt;/p&gt;
&lt;p&gt;The first plot is pretty silly but it is a nice example of how to do
arithmetic on arrays.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;def dry_adiabat(pressures):
    ground_temp = 300
    surface_pressure = 1000
    return ground_temp * (pressures/surface_pressure) ** (2/7)


def K_to_F(kelvins):
    return (kelvins - 273) * 1.8 + 32


def problem3a():
    pressures = np.arange(10, 1000)
    df = pd.DataFrame({&amp;quot;pressures&amp;quot;: pressures,
          &amp;quot;dry_adiabat_K&amp;quot;: dry_adiabat(pressures),
          &amp;quot;dry_adiabat_F&amp;quot;: K_to_F(dry_adiabat(pressures))})
    plt.figure(figsize=(12,8))
    plt.title(&amp;quot;The dry adiabat vs. pressure&amp;quot;)
    plt.ylabel(&amp;quot;Temperature (degrees)&amp;quot;)
    plt.xlabel(&amp;quot;Pressure(mb)&amp;quot;)
    plt.plot(df.pressures, df.dry_adiabat_K)
    plt.text(200, 160, &amp;quot;Kelvin&amp;quot;)
    plt.plot(df.pressures, df.dry_adiabat_F)
    plt.text(200, -150, &amp;quot;Fahrenheit&amp;quot;)


problem3a()
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="png" src="images/ch1_files/ch1_7_0.png" /&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;def problem3b():
    gisstemp = pd.read_csv(&amp;quot;data/Chapter1Data/GlobalWarming/GISSTemp.txt&amp;quot;,
                           skiprows=28,
                           header=1,
                           encoding=&amp;quot;utf-8&amp;quot;,
                           na_values=&amp;quot;*****&amp;quot;,
                           delim_whitespace=True)
    avg_temps = gisstemp[&amp;quot;J-D&amp;quot;]/100 + 14
    season_diffs = (gisstemp.JJA - gisstemp.DJF)/100
    plt.figure(figsize=(12,9))
    plt.title(&amp;quot;Global mean temperature vs. year&amp;quot;)
    plt.xlabel(&amp;quot;Year&amp;quot;)
    plt.ylabel(&amp;quot;Temperature (C)&amp;quot;)
    plt.plot(gisstemp.Year, avg_temps)
    plt.figure(figsize=(12,9))
    plt.title(&amp;quot;Change in strength of global seasonal cycle vs. year&amp;quot;)
    plt.xlabel(&amp;quot;Year&amp;quot;)
    plt.ylabel(&amp;quot;Temperature (C)&amp;quot;)
    plt.plot(gisstemp.Year, season_diffs)

problem3b()
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="png" src="images/ch1_files/ch1_8_0.png" /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="png" src="images/ch1_files/ch1_8_1.png" /&gt;&lt;/p&gt;
&lt;p&gt;The temperature vs. year plot seems pretty reasonable. You get annual
fluctuations, and you see an upward trend that wouldn't be out of
place in a startup pitch deck.&lt;/p&gt;
&lt;p&gt;The strength of the seasonal cycle seems to vary year-to-year as
well. There might be a slight downward trend - perhaps the southern
hemisphere winters are getting warmer? I think the variation is too
great to see a trend this small, but we could do some real analysis on
it if we wanted to dive deeper.&lt;/p&gt;
&lt;h3&gt;Problem 4.&lt;/h3&gt;
&lt;p&gt;Instead of writing my own polynomial interpolation function, I used
one out of SciPy. I found that
&lt;code&gt;scipy.interpolate.InterpolatedUnivariateSpline&lt;/code&gt; is significantly
faster than &lt;code&gt;scipy.interpolate.interp1d&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;def problem4():
    cubic = pd.DataFrame({&amp;quot;x&amp;quot;: [i for i in range(-2,3)],
                          &amp;quot;y&amp;quot;: [i**3 for i in range(-2, 3)]})
    interp_cubic = InterpolatedUnivariateSpline(cubic.x, cubic.y, k=3)
    xspace = np.linspace(min(cubic.x), max(cubic.x), 100)
    interp_cubic_df = pd.DataFrame({&amp;quot;x&amp;quot;: xspace,
                                    &amp;quot;y&amp;quot;: interp_cubic(xspace)})
    plt.figure(figsize=(12, 8))
    plt.title(&amp;quot;Cubic interpolation from 5 data points&amp;quot;)
    plt.plot(cubic.x, cubic.y, marker=&amp;quot;.&amp;quot;, linestyle=&amp;quot;dashed&amp;quot;)
    plt.plot(interp_cubic_df.x, interp_cubic_df.y)

    vostokT = pd.read_csv(&amp;quot;data/Chapter1Data/iceCores/vostokT.txt&amp;quot;,
                          skiprows=115, 
                          encoding=&amp;#39;iso8859_15&amp;#39;, # &amp;quot;Western&amp;quot; encoding
                          delimiter=&amp;#39;\s&amp;#39;,
                          engine=&amp;quot;python&amp;quot;)

    interp_deut = InterpolatedUnivariateSpline(vostokT.corrected_Ice_age_GT4,
                                               vostokT.deut)
    hundred_yr_intervals = np.arange(min(vostokT.corrected_Ice_age_GT4),
                                     max(vostokT.corrected_Ice_age_GT4),
                                     100)
    plt.figure(figsize=(12, 8))
    plt.title(&amp;quot;Vostok ice core temperature vs. ice age,\n interpolated at 100 year intervals&amp;quot;)
    plt.xlabel(&amp;quot;Age (years)&amp;quot;)
    plt.ylabel(&amp;quot;Temperature (C)&amp;quot;)
    plt.plot(hundred_yr_intervals, interp_deut(hundred_yr_intervals))

problem4()
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="png" src="images/ch1_files/ch1_11_0.png" /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="png" src="images/ch1_files/ch1_11_1.png" /&gt;&lt;/p&gt;
&lt;h3&gt;Problem 5&lt;/h3&gt;
&lt;p&gt;This is where we use &lt;code&gt;sign&lt;/code&gt;! This problem just asked to write some
root-finding algorithms. We see that Newton's method takes way fewer
steps to converge than the bisection method does -- 3 compared to 28.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;def func5(x):
    return x - e**(-x)


def bisect(interval, fn, iters=0, tol=1e-8):
    xbds = [interval[0], sum(interval)/2, interval[1]]
    while xbds[2] - xbds[0] &amp;gt; xbds[1] * tol:
        iters += 1
        low, mid, hi = [fn(x) for x in xbds]
        if sign(low) == sign(hi):
            return None
        if sign(low) == sign(mid):
            xbds[0] = xbds[1]
        else:
            xbds[2] = xbds[1]
        xbds[1] = (xbds[0]+xbds[2])/2
    return (xbds[1], iters)


def newton(x0, fn, iters = 0, tol=1e-8, dx=1e-5):
    x1 = x0 - fn(x0)/derivative(fn, x0, dx=dx)
    while abs(x1 - x0) &amp;gt; 1e-8:
        iters += 1
        x0 = x1
        x1 = x0 - fn(x0)/derivative(fn, x0, dx=dx)
    return ((x1 + x0)/2, iters)


def problem5():
    print(bisect((0, 1), func5))
    print(newton(0.5, func5))

problem5()

(0.5671432893723249, 28)
(0.56714329040978251, 3)
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Problem 6.&lt;/h3&gt;
&lt;p&gt;I learned how to use the Romberg integration function,
&lt;code&gt;scipy.integrate.romb&lt;/code&gt;! You need to make sure the number of samples is
one more than a power of two, so that's what the funky &lt;code&gt;ceil(log2(a))&lt;/code&gt;
stuff is. Beyond that this is pretty straightforward. As expected, the
integral goes to 1 pretty quickly as a increases.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="x"&gt;def gaussian(x):&lt;/span&gt;
&lt;span class="x"&gt;    return e ** (-x**2)&lt;/span&gt;


&lt;span class="x"&gt;def problem6():&lt;/span&gt;
&lt;span class="x"&gt;    plt.figure(figsize=(12,9))&lt;/span&gt;
&lt;span class="x"&gt;    aspace = np.linspace(0, 10, 200)&lt;/span&gt;
&lt;span class="x"&gt;    plt.title(&amp;quot;Romberg integration of &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;y&lt;/span&gt;&lt;span class="x"&gt;=\int_0^ae^&lt;/span&gt;&lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="x"&gt;-x^2}dx&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="x"&gt;\n&amp;quot;, fontsize=24)&lt;/span&gt;
&lt;span class="x"&gt;    plt.ylabel(&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;y&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="x"&gt;&amp;quot;, fontsize=24)&lt;/span&gt;
&lt;span class="x"&gt;    plt.plot(aspace, [romb_of_a(a) for a in aspace])&lt;/span&gt;
&lt;span class="x"&gt;    plt.text(2, 0.8, r&amp;quot;number of steps = &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="x"&gt;2^&lt;/span&gt;&lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="x"&gt;\lceil log_2 a\rceil}\cdot32+1&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="x"&gt;&amp;quot;,&lt;/span&gt;
&lt;span class="x"&gt;             fontsize=18)&lt;/span&gt;
&lt;span class="x"&gt;    plt.xlabel(&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;a&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="x"&gt;&amp;quot;, fontsize=24)&lt;/span&gt;


&lt;span class="x"&gt;def romb_of_a(a):&lt;/span&gt;
&lt;span class="x"&gt;    if a == 0:&lt;/span&gt;
&lt;span class="x"&gt;        return 0&lt;/span&gt;
&lt;span class="x"&gt;    xspace = np.linspace(0, a, 2**(5 + np.ceil(log2(a)))+1)&lt;/span&gt;
&lt;span class="x"&gt;    return romb(gaussian(xspace), xspace[1] -xspace[0])&lt;/span&gt;


&lt;span class="x"&gt;problem6()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="png" src="images/ch1_files/ch1_15_0.png" /&gt;&lt;/p&gt;
&lt;h3&gt;Problem 7&lt;/h3&gt;
&lt;p&gt;Instead of working hard and thinking about different numerical methods
for solving differential equations I just used &lt;code&gt;scipy.integrate.odeint&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="x"&gt;def diff_eq(a):&lt;/span&gt;
&lt;span class="x"&gt;    return (lambda y, t: a*y*(1-y))&lt;/span&gt;

&lt;span class="x"&gt;def problem7():&lt;/span&gt;
&lt;span class="x"&gt;    tscale = np.linspace(0, 10, 100)&lt;/span&gt;
&lt;span class="x"&gt;    plt.figure(figsize=(12, 8))&lt;/span&gt;
&lt;span class="x"&gt;    plt.text(3.6, 1.1, r&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="x"&gt;\frac&lt;/span&gt;&lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="x"&gt;dY}&lt;/span&gt;&lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="x"&gt;dt} = aY\cdot(1-Y)&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="x"&gt;&amp;quot;, fontsize=24)&lt;/span&gt;
&lt;span class="x"&gt;    plt.plot(tscale, odeint(diff_eq(1), 0.01, tscale))&lt;/span&gt;
&lt;span class="x"&gt;    plt.text(5, 0.5, r&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;a&lt;/span&gt;&lt;span class="x"&gt;=1&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="x"&gt;&amp;quot;, fontsize=16)&lt;/span&gt;
&lt;span class="x"&gt;    plt.plot(tscale, odeint(diff_eq(2), 0.01, tscale))&lt;/span&gt;
&lt;span class="x"&gt;    plt.text(2.5, 0.5, r&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;a&lt;/span&gt;&lt;span class="x"&gt;=2&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="x"&gt;&amp;quot;, fontsize=16)&lt;/span&gt;
&lt;span class="x"&gt;    plt.plot(tscale, odeint(diff_eq(3), 0.01, tscale))&lt;/span&gt;
&lt;span class="x"&gt;    plt.text(1.65, 0.5, r&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;a&lt;/span&gt;&lt;span class="x"&gt;=3&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="x"&gt;&amp;quot;, fontsize=16)&lt;/span&gt;
&lt;span class="x"&gt;    plt.plot(tscale, odeint(diff_eq(4), 0.01, tscale))&lt;/span&gt;
&lt;span class="x"&gt;    plt.text(0.6, 0.5, r&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;a&lt;/span&gt;&lt;span class="x"&gt;=4&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="x"&gt;&amp;quot;, fontsize=16)&lt;/span&gt;
&lt;span class="x"&gt;    plt.xlabel(&amp;quot;time (t)&amp;quot;)&lt;/span&gt;

&lt;span class="x"&gt;problem7()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="png" src="images/ch1_files/ch1_17_0.png" /&gt;&lt;/p&gt;
&lt;h3&gt;Problem 8.&lt;/h3&gt;
&lt;p&gt;Here I use a &lt;a href="http://wiki.scipy.org/Cookbook/Zombie_Apocalypse_ODEINT"&gt;cool trick from the SciPy
cookbook&lt;/a&gt; by
turning two differential equations into one differential equation
which acts on a 2D vector, making it really easy to pitch to &lt;code&gt;odeint&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="x"&gt;def func8(xs, t):&lt;/span&gt;
&lt;span class="x"&gt;    y = xs[0]&lt;/span&gt;
&lt;span class="x"&gt;    z = xs[1]&lt;/span&gt;
&lt;span class="x"&gt;    fy = - z/(y**2 + z**2)&lt;/span&gt;
&lt;span class="x"&gt;    fz = y/(y**2 + z**2)&lt;/span&gt;
&lt;span class="x"&gt;    return [fy, fz]&lt;/span&gt;


&lt;span class="x"&gt;def problem8():&lt;/span&gt;
&lt;span class="x"&gt;    y0 = 1&lt;/span&gt;
&lt;span class="x"&gt;    z0 = 0&lt;/span&gt;
&lt;span class="x"&gt;    tscale = np.linspace(0, 10, 100)&lt;/span&gt;
&lt;span class="x"&gt;    sol = odeint(func8, [y0, z0], tscale).transpose()&lt;/span&gt;
&lt;span class="x"&gt;    plt.figure(figsize=(12, 8))&lt;/span&gt;
&lt;span class="x"&gt;    plt.plot(tscale, sol[0])&lt;/span&gt;
&lt;span class="x"&gt;    plt.text(1.7, 0, r&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;Y&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="x"&gt;&amp;quot;, fontsize=24)&lt;/span&gt;
&lt;span class="x"&gt;    plt.text(0.1, -0.5, r&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;dY&lt;/span&gt;&lt;span class="x"&gt;/dt = -\frac&lt;/span&gt;&lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="x"&gt;Z}&lt;/span&gt;&lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="x"&gt;Y^2+Z^2}&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="x"&gt;&amp;quot;, fontsize=18)&lt;/span&gt;
&lt;span class="x"&gt;    plt.plot(tscale, sol[1])&lt;/span&gt;
&lt;span class="x"&gt;    plt.text(3.4, 0, r&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;Z&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="x"&gt;&amp;quot;, fontsize=24)&lt;/span&gt;
&lt;span class="x"&gt;    plt.text(2.8, 0.5, r&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;dZ&lt;/span&gt;&lt;span class="x"&gt;/dt = \frac&lt;/span&gt;&lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="x"&gt;Y}&lt;/span&gt;&lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="x"&gt;Y^2+Z^2}&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="x"&gt;&amp;quot;, fontsize=18)&lt;/span&gt;
&lt;span class="x"&gt;    plt.xlabel(&amp;quot;time (t)&amp;quot;)&lt;/span&gt;


&lt;span class="x"&gt;problem8()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="png" src="images/ch1_files/ch1_19_0.png" /&gt;&lt;/p&gt;
&lt;h3&gt;Problem 9.&lt;/h3&gt;
&lt;p&gt;Now begins a series of increasingly interesting basic physics and
chemistry problems.&lt;/p&gt;
&lt;p&gt;In this one we calculate the amount of energy that comes into the
Earth from the Sun. We find that this is enough to raise our entire
atmosphere off the Earth pretty quickly. This hasn't happened yet
because a lot of the energy coming from the Sun ends up warming the
Earth. Then this energy just gets radiated out again. This leaves
little room for lifting our atmosphere.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;def grav_pot(r):
    &amp;quot;Get gravitational potential at a radius from the Earth.&amp;quot;
    return -G*M_e/r

def problem9():
    weight = 10 # 10 m/s^2 * 1 kg = 10N
    print(&amp;quot;The weight of a 1kg object on the surface of the Earth is &amp;quot;
          &amp;quot;10 newtons.&amp;quot;)
    joules_per_kg_100m = 1000 # 10N * 100m = 1000J
    print(&amp;quot;It takes 1000 joules to raise a 1kg mass 100m.&amp;quot;)
    insolation = sa_e * 200
    print(&amp;quot;The total insolation of the Earth is about {:.2e} watts.&amp;quot;.format(
               insolation))
    delta_U = 1e4 * (grav_pot(2e5+r_earth) - grav_pot(r_earth)) # for 1 m^2

    num_sec = delta_U / 200
    print(&amp;quot;It would take {:.2e} seconds, or {:.2f} years, to lift all parts &amp;quot;
          &amp;quot;of the atmosphere 200 km.&amp;quot;.format(num_sec, num_sec/seconds_per_year))
    delta_U_mgh = 1e4 * 10 * 2e5
    num_sec_mgh = delta_U_mgh / 200

    print(&amp;quot;If we assume that gravitational acceleration is independent of &amp;quot;
          &amp;quot;position we find that it would take {:.2f} years.&amp;quot;.format(
              num_sec_mgh/seconds_per_year))


problem9()

The weight of a 1kg object on the surface of the Earth is 10 newtons.
It takes 1000 joules to raise a 1kg mass 100m.
The total insolation of the Earth is about 1.02e+17 watts.
It would take 9.54e+07 seconds, or 3.02 years, to lift all parts of the atmosphere 200 km.
If we assume that gravitational acceleration is independent of position we find that it would take 3.17 years.
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Problem 10.&lt;/h3&gt;
&lt;p&gt;A quick calculation of the kinetic energy of a comet with a mass of $4
\cdot 10^9$ kg and velocity of $1 \cdot 10^4$ m/s.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;def problem10():
    # mv^2 / 2
    K = 4e9 * 1e4 ** 2 / 2
    print(&amp;quot;The comet turns {} joules of kinetic energy into heat (and a little &amp;quot;
          &amp;quot;kinetic energy for the flying debris).&amp;quot;.format(K))
problem10()


The comet turns 2e+17 joules of kinetic energy into heat (and a little kinetic energy for the flying debris).
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Problem 11.&lt;/h3&gt;
&lt;p&gt;We use Newton's law of gravitation to determine the mass of a body as
a function of its radius and surface gravitational
acceleration. Here's the derivation:&lt;/p&gt;
&lt;p&gt;$$U = -\frac{GmM}{r}$$
$$\frac{\mathrm{d}U}{\mathrm{d}r} = \frac{GmM}{r^2} = ma$$
$$M = \frac{ar^2}{G}$$&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;def problem11():
    r_titan = 2.575e6
    a_titan = 1.35
    a_earth = 9.8
    mass_titan = r_titan**2 * a_titan / G
    mass_earth = r_earth**2 * a_earth / G
    print(&amp;quot;The mass of Titan is {:.3} kg.&amp;quot;.format(mass_titan))
    print(&amp;quot;In comparison, the mass of Earth is {:.2} kg.&amp;quot;.format(mass_earth))

problem11()

The mass of Titan is 1.34e+23 kg.
In comparison, the mass of Earth is 6e+24 kg.
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Problem 12.&lt;/h3&gt;
&lt;p&gt;A quick calculation of the potential energy of the Moon, and a
reminder that heavier things do not, in fact, fall faster. Could
Aristotle do this? I think not.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;def problem12():
    m_moon = 7.35e22
    r_moon = 3.84e8
    K_moon = U_moon = m_moon*(-1 * grav_pot(r_moon))
    print(&amp;quot;The kinetic energy of the Moon on impact would be {:.2} J.&amp;quot;.format(K_moon))
    v_f = (2*grav_pot(r_moon))**0.5
    print(&amp;quot;The final velocity of the Moon is {:.2} m/s and does not depend on &amp;quot;
          &amp;quot;the mass of the Moon.&amp;quot;.format(v_f))


problem12()

The kinetic energy of the Moon on impact would be 7.7e+28 J.
The final velocity of the Moon is (8.8e-14+1.4e+03j) m/s and does not depend on the mass of the Moon.
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Problem 13.&lt;/h3&gt;
&lt;p&gt;If an impactor the size of the Moon hits the earth at 15,000 m/s, will
it vaporize?&lt;/p&gt;
&lt;p&gt;Another gentle reminder that mass divides out all the time when you
are dealing with gravitational potential energy.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;def problem13():
    m_moon = 7.35e22
    K_over_m = 0.5 * 1.5e4 ** 2  # 1/2 v^2
    K = m_moon * K_over_m
    vaporization_energy = 2e7
    print(&amp;quot;The kinetic energy released by the impact is {:.2} J.&amp;quot;.format(K))
    print(&amp;quot;This is {:.2} J/kg.&amp;quot;.format(K_over_m))
    if K_over_m &amp;lt; vaporization_energy:
        print(&amp;quot;This is not enough to vaporize the impactor.&amp;quot;)
    else:
        print(&amp;quot;This is enough to vaporize the impactor.&amp;quot;)


problem13()

The kinetic energy released by the impact is 8.3e+30 J.
This is 1.1e+08 J/kg.
This is enough to vaporize the impactor.
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Problem 1.14.&lt;/h3&gt;
&lt;p&gt;We have
$$M(\mathcal{L}_\circledast, d) = C-2.5\log_{10}\frac{\mathcal{L}_\circledast}{4\pi d^2}$$
where $M$ is bolometric magnitude, $L_\circledast$ is luminosity of a star, $d$
is the distance between that star and the observer, and $C$ a constant that
makes the magnitude of Vega from Earth about 0.&lt;/p&gt;
&lt;p&gt;Taking $r_0$ to be the average distance of the Earth from the Sun we have
$$M_0 = C - 2.5\log{10}\frac{\mathcal{L}_\odot}{4\pi r_0^2}$$
where $M_0$ is the bolometric magnitude of the Sun as seen from Earth.&lt;/p&gt;
&lt;p&gt;Subtracting the two we get
$$M_0 - M = 2.5 (\log{10} \frac{\mathcal{L}_\circledast}{4\pi d^2} -\log_{10}
\frac{\mathcal{L}_\odot}{4\pi r_0^2})$$&lt;/p&gt;
&lt;p&gt;$$\frac{M_0-M}{2.5} = \log_{10} \frac{\mathcal{L}_\circledast
r_0^2}{\mathcal{L}_\odot d^2}$$
$$\mathcal{L}_\circledast = \mathcal{L}_\odot(\frac{d}{r_0})^2
10^{\frac{M_0-M}{2.5}}$$&lt;/p&gt;
&lt;p&gt;Which makes sense - we see that as $M$ decreases, $\mathcal{L}_\circledast$
increases. All else held constant, lower bolometric magnitude should imply a
more luminous star. Additionally the implied luminosty increases as
$\frac{d}{r_0}$ increases if magnitude is held constant. We also see that the
units are the same on both sides of the equation, which is an encouraging sign.
Now plugging the Gliese 581 numbers in, we get:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;sun_lum = 3.846e26
M_0 = -26.82
r_0 = 1.496e11
m_per_parsec = 3.086e16


def bolometric(luminosity, dist):
    return -18.98 - 2.5*log(luminosity/(4*pi*dist**2), 10)


def lum_mag_dist(magnitude, dist):
    return sun_lum * (dist/r_0) **2 * 10**((M_0 - magnitude)/2.5)


def dist(magnitude, luminosity):
    return (luminosity * r_0**2 / sun_lum * 10**((magnitude - M_0)/2.5)) ** 0.5


gliese_lum = lum_mag_dist(8.12, 6.27*m_per_parsec)
print(&amp;quot;We need to be {:.2e} m from Gliese 581 for it to have the same apparent &amp;quot;
      &amp;quot;magnitude as the Sun on Earth.&amp;quot;.format(dist(M_0, gliese_lum)))
print(&amp;quot;We need to be {:.2e} m from the Sun for it to have the same apparent &amp;quot;
      &amp;quot;magnitude as the Sun on Earth.&amp;quot;.format(dist(M_0, sun_lum)))
print(&amp;quot;We need to be {:.2e} m from the Sun for it to have the same apparent &amp;quot;
      &amp;quot;magnitude as Gliese 581 from Earth.&amp;quot;.format(dist(8.12, sun_lum)))
print(&amp;quot;We need to be {:.2e} m from Gliese 581 for it to have the same apparent &amp;quot;
      &amp;quot;magnitude as Gliese 581 from Earth.&amp;quot;.format(dist(8.12, gliese_lum)))


We need to be 1.99e+10 m from Gliese 581 for it to have the same apparent magnitude as the Sun on Earth.
We need to be 1.50e+11 m from the Sun for it to have the same apparent magnitude as the Sun on Earth.
We need to be 1.46e+18 m from the Sun for it to have the same apparent magnitude as Gliese 581 from Earth.
We need to be 1.93e+17 m from Gliese 581 for it to have the same apparent magnitude as Gliese 581 from Earth.
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We would need to be orbiting at $1.99\times10^{10}$ m from Gliese 581
to get the same stellar flux as we do here on Earth.&lt;/p&gt;
&lt;p&gt;Since flux varies as $r^2\mathcal{L}$, we could also have reached this
conclusion by finding the square root ratio of the luminosities and
multiplying that by Earth's orbital radius:&lt;/p&gt;
&lt;p&gt;$$r = r_0\sqrt{\frac{\mathcal{L}_\circledast}{\mathcal{L}_\odot}}$$ &lt;/p&gt;
&lt;p&gt;Where $r$ is the orbital radius of a planet in the Gliese 581 system.&lt;/p&gt;
&lt;p&gt;Incidentally, &lt;a href="http://en.wikipedia.org/wiki/Gliese_581"&gt;Wikipedia&lt;/a&gt;
states that Gliese 581's apparent magnitude is between 10.56 and
10.58. Implications of this are left for the reader ;).&lt;/p&gt;
&lt;p&gt;To find the absolute magnitude we just need to use the functions
defined above (or we can go straight to the flux):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;def abs_mag(magnitude, dist):
    lum = lum_mag_dist(magnitude, dist)
    flux = lum/(4*pi*(10*m_per_parsec)**2)
    return -18.98 - 2.5 * log(flux, 10)

print(&amp;quot;The absolute magnitude of the Sun is {:.2f}.&amp;quot;.format(abs_mag(M_0, r_0)))
print(&amp;quot;The absolute magnitude of Gliese 581 is {:.2f}.&amp;quot;
      .format(abs_mag(8.12, 6.27*m_per_parsec)))

The absolute magnitude of the Sun is 4.75.
The absolute magnitude of Gliese 581 is 9.13.
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The apparent magnitude of the Sun listed on Wikipedia is also slightly
higher than that found here.&lt;/p&gt;
&lt;h3&gt;Problem 1.15&lt;/h3&gt;
&lt;p&gt;To find the hydrogen-burning lifetime of a star based on its
luminosity and mass, we first let $\mathcal{L}$ be luminosity, $E_f$
be energy per fusion, $m_f$ be mass per fusion, $M$ be mass of the
stellar core and $t_f$ be the time of final hydrogen fusion. Assuming
the star is completely hydrogen, we get:&lt;/p&gt;
&lt;p&gt;$$M = \int_0^{t_f} \mathcal{L}\frac{m_f}{E_f}\mathrm{d}t$$.&lt;/p&gt;
&lt;p&gt;If we assume $\mathcal{L}$ is constant, we get&lt;/p&gt;
&lt;p&gt;$$M = \frac{\mathcal{L}m_f}{E_f}t$$
$$t = \frac{ME_f}{\mathcal{L}m_f}$$&lt;/p&gt;
&lt;p&gt;However, we know that $\mathcal{L}$ actually varies with time, roughly
according to Eq. 1.1:&lt;/p&gt;
&lt;p&gt;$$\mathcal{L}(t) = L_{t_\odot}(1+\frac{2}{5}(1-\frac{t}{t_\odot}))^{-1}$$&lt;/p&gt;
&lt;p&gt;Which we can plug into the integral above:&lt;/p&gt;
&lt;p&gt;$$M=\frac{\mathcal{L_\odot}m_f}{E_f}\int_0^{t_f}(1+\frac{2}{5}(1-\frac{t}{t_\odo
t}))^{-1}\mathrm{d}t$$&lt;/p&gt;
&lt;p&gt;Let's take $t_\odot = \frac{t_f}{2}$, as recommended by the text -
this somewhat eases our minds about using this approximation far away
from $t_\odot$. After some $u$-substitution we can get&lt;/p&gt;
&lt;p&gt;$$M=\frac{5\mathcal{L_\odot}m_ft_f}{4E_f}\ln\frac{7}{3}$$
$$t_f=\frac{4E_fM}{5\mathcal{L_\odot}m_f\ln\frac{7}{3}}$$&lt;/p&gt;
&lt;p&gt;Now to answer the questions we just need to implement these equations
in code, keeping in mind that about 10% of the mass of a star actually
undergoes fusion.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nx"&gt;def&lt;/span&gt; &lt;span class="nx"&gt;mass_remaining&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;initmass&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;luminosity&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;time&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;Luminosity needs to be a function taking time as a parameter.&amp;quot;&lt;/span&gt;
    &lt;span class="nx"&gt;proton_mass&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mf"&gt;1.67&lt;/span&gt;&lt;span class="nx"&gt;e&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;27&lt;/span&gt;
    &lt;span class="nx"&gt;mass_p_fusion&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="nx"&gt;proton_mass&lt;/span&gt;
    &lt;span class="nx"&gt;energy_p_fusion&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mf"&gt;4.17&lt;/span&gt;&lt;span class="nx"&gt;e&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;
    &lt;span class="nx"&gt;burned&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;quad&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;luminosity&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;time&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="nx"&gt;mass_p_fusion&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="nx"&gt;energy_p_fusion&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nx"&gt;initmass&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="nx"&gt;burned&lt;/span&gt;


&lt;span class="nx"&gt;def&lt;/span&gt; &lt;span class="nx"&gt;findzero&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;func&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;init&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;bd&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
    &lt;span class="nx"&gt;init_sign&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;sign&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;func&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;init&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="nx"&gt;bd_sign&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;sign&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;func&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;bd&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="nx"&gt;init_sign&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="nx"&gt;bd_sign&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
        &lt;span class="nx"&gt;init&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;bd&lt;/span&gt;
        &lt;span class="nx"&gt;bd&lt;/span&gt; &lt;span class="o"&gt;*=&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;
        &lt;span class="nx"&gt;init_sign&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;sign&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;func&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;init&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
        &lt;span class="nx"&gt;bd_sign&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;sign&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;func&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;bd&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nx"&gt;bisect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;init&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="nx"&gt;bd&lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;func&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;


&lt;span class="nx"&gt;def&lt;/span&gt; &lt;span class="nx"&gt;const_lum_lifetime&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;initmass&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="nx"&gt;e29&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;lum&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="nx"&gt;e26&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nx"&gt;seconds_per_year&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nx"&gt;findzero&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;lambda&lt;/span&gt; &lt;span class="nx"&gt;t&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;mass_remaining&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;initmass&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                                             &lt;span class="nx"&gt;lambda&lt;/span&gt; &lt;span class="nx"&gt;t_l&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;lum&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                                             &lt;span class="nx"&gt;t&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt;

&lt;span class="nx"&gt;def&lt;/span&gt; &lt;span class="nx"&gt;var_lum_lifetime&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;initmass&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="nx"&gt;e29&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;lum&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="nx"&gt;e26&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nx"&gt;seconds_per_year&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nx"&gt;findzero&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;lambda&lt;/span&gt; &lt;span class="nx"&gt;t_0&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;mass_remaining&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;initmass&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                                               &lt;span class="nx"&gt;lambda&lt;/span&gt; &lt;span class="nx"&gt;t_l&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;lum&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="nx"&gt;luminosity&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;t_l&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;t_0&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
                                               &lt;span class="nx"&gt;t_0&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
                    &lt;span class="nx"&gt;init&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;


&lt;span class="nx"&gt;def&lt;/span&gt; &lt;span class="nx"&gt;problem15a&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
    &lt;span class="nx"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Assuming constant luminosity of 4e26 W, a star with mass 2e30 kg has a &amp;quot;&lt;/span&gt;
          &lt;span class="s2"&gt;&amp;quot;lifetime of {:.2} y.&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;const_lum_lifetime&lt;/span&gt;&lt;span class="p"&gt;()))&lt;/span&gt;
    &lt;span class="nx"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Assuming variable luminosity of 4e26 W halfway through its Main Sequence,&amp;quot;&lt;/span&gt;
          &lt;span class="s2"&gt;&amp;quot; a star with mass 2e30 kg has a lifetime of {:.2} y.&amp;quot;&lt;/span&gt;
          &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;var_lum_lifetime&lt;/span&gt;&lt;span class="p"&gt;()))&lt;/span&gt;
    &lt;span class="nx"&gt;mass_scale&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;np&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;linspace&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;0.8&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;500&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;  &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="nx"&gt;ratio&lt;/span&gt; &lt;span class="nx"&gt;to&lt;/span&gt; &lt;span class="nx"&gt;solar&lt;/span&gt; &lt;span class="nx"&gt;mass&lt;/span&gt;
    &lt;span class="nx"&gt;plt&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;figsize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="nx"&gt;plt&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;plot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;mass_scale&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;const_lum_lifetime&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;initmass&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nx"&gt;m&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="nx"&gt;e29&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                                             &lt;span class="n"&gt;lum&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="nx"&gt;e26&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nx"&gt;seconds_per_year&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nx"&gt;m&lt;/span&gt;&lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;3.5&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="nx"&gt;for&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="nx"&gt;mass_scale&lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="nx"&gt;plt&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;plot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;mass_scale&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;var_lum_lifetime&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;initmass&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nx"&gt;m&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="nx"&gt;e29&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                                           &lt;span class="n"&gt;lum&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="nx"&gt;e26&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nx"&gt;seconds_per_year&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nx"&gt;m&lt;/span&gt;&lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;3.5&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="nx"&gt;for&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="nx"&gt;mass_scale&lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="nx"&gt;plt&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;title&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;The dependence of stellar lifetime on stellar mass,\n&amp;quot;&lt;/span&gt;
              &lt;span class="s2"&gt;&amp;quot;assuming constant luminosity&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="nx"&gt;plt&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;xlabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Mass ($M_\odot$)&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="nx"&gt;plt&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;ylabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Time ($10^{10}$y)&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="nx"&gt;problem15a&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;


&lt;span class="nx"&gt;Assuming&lt;/span&gt; &lt;span class="nx"&gt;constant&lt;/span&gt; &lt;span class="nx"&gt;luminosity&lt;/span&gt; &lt;span class="nx"&gt;of&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="nx"&gt;e26&lt;/span&gt; &lt;span class="nx"&gt;W&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;a&lt;/span&gt; &lt;span class="nx"&gt;star&lt;/span&gt; &lt;span class="kd"&gt;with&lt;/span&gt; &lt;span class="nx"&gt;mass&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="nx"&gt;e30&lt;/span&gt; &lt;span class="nx"&gt;kg&lt;/span&gt; &lt;span class="nx"&gt;has&lt;/span&gt; &lt;span class="nx"&gt;a&lt;/span&gt; &lt;span class="nx"&gt;lifetime&lt;/span&gt; &lt;span class="nx"&gt;of&lt;/span&gt; &lt;span class="mf"&gt;9.9&lt;/span&gt;&lt;span class="nx"&gt;e&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;09&lt;/span&gt; &lt;span class="nx"&gt;y&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;
&lt;span class="nx"&gt;Assuming&lt;/span&gt; &lt;span class="nx"&gt;variable&lt;/span&gt; &lt;span class="nx"&gt;luminosity&lt;/span&gt; &lt;span class="nx"&gt;of&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="nx"&gt;e26&lt;/span&gt; &lt;span class="nx"&gt;W&lt;/span&gt; &lt;span class="nx"&gt;halfway&lt;/span&gt; &lt;span class="nx"&gt;through&lt;/span&gt; &lt;span class="nx"&gt;its&lt;/span&gt; &lt;span class="nx"&gt;Main&lt;/span&gt; &lt;span class="nx"&gt;Sequence&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;a&lt;/span&gt; &lt;span class="nx"&gt;star&lt;/span&gt; &lt;span class="kd"&gt;with&lt;/span&gt; &lt;span class="nx"&gt;mass&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="nx"&gt;e30&lt;/span&gt; &lt;span class="nx"&gt;kg&lt;/span&gt; &lt;span class="nx"&gt;has&lt;/span&gt; &lt;span class="nx"&gt;a&lt;/span&gt; &lt;span class="nx"&gt;lifetime&lt;/span&gt; &lt;span class="nx"&gt;of&lt;/span&gt; &lt;span class="mf"&gt;9.3&lt;/span&gt;&lt;span class="nx"&gt;e&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;09&lt;/span&gt; &lt;span class="nx"&gt;y&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="png" src="images/ch1_files/ch1_36_1.png" /&gt;&lt;/p&gt;
&lt;p&gt;We see that the radiation flux of the surface of a star is:&lt;/p&gt;
&lt;p&gt;$$F_{out} = 5.67\cdot10^{-8}T^4$$&lt;/p&gt;
&lt;p&gt;So the luminosity is given by&lt;/p&gt;
&lt;p&gt;$$\mathcal{L} = F_{out}4\pi r^2 = 5.67cdot10^{-8}T^4\cdot4\pi r^2$$&lt;/p&gt;
&lt;p&gt;And the surface temperature is given by&lt;/p&gt;
&lt;p&gt;$$T=(\frac{\mathcal{L}}{5.67\cdot10^{-8}\cdot4\pi r^2})^{\frac{1}{4}}$$&lt;/p&gt;
&lt;p&gt;Ignoring the compressibility of the star, its mass should vary as
$m = \frac{4}{3}\pi r^3 \Rightarrow r = (\frac{3m}{4})^{\frac{1}{3}} $.&lt;/p&gt;
&lt;p&gt;So its temperature varies by&lt;/p&gt;
&lt;p&gt;$$T=\Bigg(\frac{\mathcal{L}}{5.67\cdot10^{-8}\cdot4\pi
(\frac{3M_\circledast}{4})^{\frac{2}{3}}}\Bigg)^{\frac{1}{4}}$$&lt;/p&gt;
&lt;p&gt;Since $\mathcal{L} \propto M_\circledast^{3.5}$ (Eq 1.2) we have&lt;/p&gt;
&lt;p&gt;$$T=\Bigg(\frac{M_\circledast^{3.5}}{5.67\cdot10^{-8}\cdot4\pi
(\frac{3M_\circledast}{4})^{\frac{2}{3}}}\Bigg)^{\frac{1}{4}}$$&lt;/p&gt;
&lt;p&gt;And as $T$ increases we see that $M_\circledast$ must increase, which as we saw
earlier, means that the lifetime of the star decreases.&lt;/p&gt;
&lt;h3&gt;Problem 16.&lt;/h3&gt;
&lt;p&gt;What's the power density of the Sun compared to that of a human?&lt;/p&gt;
&lt;p&gt;How much hydrogen would I need for my entire lifetime if we ran of fusion?&lt;/p&gt;
&lt;p&gt;With a bit of simple math we can get a decent feel for these things.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;def problem16():
    sun_lum = 3.84e26
    sun_core_mass = 1.99e29
    sun_power_density = sun_lum / sun_core_mass
    human_power = 1e2
    human_mass = 70
    human_power_density = human_power / human_mass
    print(&amp;quot;A human uses about {:.2} watts/kg while the Sun uses {:.2} watts/kg.&amp;quot;
          .format(human_power_density, sun_power_density))

    proton_mass = 1.67e-27
    mass_p_fusion = 4 * proton_mass
    energy_p_fusion = 4.17e-12
    energy_p_kg = energy_p_fusion / mass_p_fusion
    seconds_p_year = 365*24*60*60
    human_lifetime_energy = human_power * seconds_p_year * 80
    print(&amp;quot;If a human ran on hydrogen fusion it would need {:.2} kg of hydrogen&amp;quot;
          &amp;quot; for a lifetime supply of energy.&amp;quot;
          .format(human_lifetime_energy/energy_p_kg))

problem16()


A human uses about 1.4 watts/kg while the Sun uses 0.0019 watts/kg.
If a human ran on hydrogen fusion it would need 0.0004 kg of hydrogen for a lifetime supply of energy.
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Problem 17.&lt;/h3&gt;
&lt;p&gt;How much calcite does 1 Gt of carbon turn into? What kind of volume are we
talking here?&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;def problem17():
    CaCO3_mass = 100.09
    C_mass = 12.01
    CaCO3_p_C = CaCO3_mass / C_mass
    area_KS = 2.13e5
    CaCO3_density = 2700 * 1e-12  # Gt/m^3
    print(&amp;quot;Each Gt of C, turned into CaCO3, is {:.2} Gt.&amp;quot;.format(CaCO3_p_C))
    print(&amp;quot;This amount would cover Kansas in a layer {:.2} m thick.&amp;quot;
          .format(CaCO3_p_C/CaCO3_density/area_KS))

problem17()

Each Gt of C, turned into CaCO3, is 8.3 Gt.
This amount would cover Kansas in a layer 1.4e+04 m thick.
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Problem 18.&lt;/h3&gt;
&lt;p&gt;What does 9 Gt of additional carbon in the form of $\mathrm{CO}_2$
mean, in terms of molecule count and atmospheric concentration?&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;def problem18():
    CO2_mass = 44.01
    avogadro = 6.02e23
    C_mass = 12.01
    total_CO2_mass = CO2_mass / C_mass * 9e15 # 9 Gt of carbon in grams
    total_CO2_number = total_CO2_mass / CO2_mass * avogadro
    atmosphere_n = 1e44
    print(&amp;quot;9 Gt carbon emissions is {:.2} CO2 molecules, which is {:.2}ppm.&amp;quot;
          .format(total_CO2_number, total_CO2_number/atmosphere_n * 1e6))

problem18()


9 Gt carbon emissions is 4.5e+38 CO2 molecules, which is 4.5ppm.
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Problem 19.&lt;/h3&gt;
&lt;p&gt;Some basic $\delta$ calculations.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;def problem19():
    return((1-0.037)*O18_p_O16,
           (1-0.438)*D_p_H)
problem19()





(0.0019310206536996193, 8.753894080996886e-05)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;So we see that in ice with $\delta^{18}\mathrm{O}$ of -37 permil the
ratio of $^{18}\mathrm{O}$ to $^{16}\mathrm{O}$ is 0.0019.
We also see that in ice with $\delta\mathrm{D}$ of -438 permil the
ratio of $\mathrm{D}$ to $\mathrm{H}$ is $8.75\cdot10^{-5}$.&lt;/p&gt;
&lt;h3&gt;Problem 20.&lt;/h3&gt;
&lt;p&gt;What happens when you remove 300 m of the oceans' depth and freeze it
all in a glacier with $\delta\mathrm{D}$ of -420 permil?&lt;/p&gt;
&lt;p&gt;$$(1+\delta_1)f_1+(1+\delta_2)f_2=1$$
$$\delta_2 = \frac{1-(1+\delta_1)f_1}{f_2} - 1$$&lt;/p&gt;
&lt;p&gt;And $f_2 = 1-f_1$ so
$$\delta_2 = \frac{1-(1+\delta_1)f_1}{1-f_1} - 1$$&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;def problem20():
    ocean_vol = 1.4e18  # m^3
    ocean_sa = 3.6e14  # m^2
    removed_frac = 300 * ocean_sa / ocean_vol
    removed_dD = -0.42
    remaining_dD = (1-(1+removed_dD)*removed_frac)/(1-removed_frac) -1
    return remaining_dD

problem20()





0.03510835913312693
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;So if we removed 300 m depth of ocean water to form an Antarctic
glacier with $\delta\mathrm{D}$ of -420 permil this would increase the
$\delta\mathrm{D}$ of the ocean water by 35 permil.&lt;/p&gt;
&lt;h3&gt;Problem 21.&lt;/h3&gt;
&lt;p&gt;We have&lt;/p&gt;
&lt;p&gt;$$r_1 = (1 + \epsilon) r_2$$&lt;/p&gt;
&lt;p&gt;And for any $i$, with $r_s$ the isotopic ratio of some standard,&lt;/p&gt;
&lt;p&gt;$$r_i = (1 + \delta_i) r_s$$&lt;/p&gt;
&lt;p&gt;Plugging this in we get&lt;/p&gt;
&lt;p&gt;$$(1+\delta_1)r_s = (1+\epsilon) (1+\delta_2) r_s$$
$$1+\delta_1 = 1 + \delta_2 + \epsilon\, (1 + \delta_2)$$
$$\delta_1 - \delta_2 = (1+\delta_2)\, \epsilon$$
$$\blacksquare$$&lt;/p&gt;
&lt;p&gt;At 290 K the $\delta^{18}\mathrm{O}$ of water vapor in equilibrium with liquid
with $\delta^{18}\mathrm{O}$ of 0 is -10 permil.&lt;/p&gt;
&lt;p&gt;$$ \delta_1 - \delta_2 = (1+\delta_2)\, \epsilon $$
$$ \epsilon = -\frac{\delta_2}{1+\delta_2} $$&lt;/p&gt;
&lt;p&gt;If we take phase 1 to be the liquid water and phase 2 to be the water vapor we
have&lt;/p&gt;
&lt;p&gt;$$ \epsilon = \frac{0.01}{0.99} = 0.010101... $$&lt;/p&gt;
&lt;p&gt;If we take phase 2 to be liquid water and phase 1 to be the water vapor we have&lt;/p&gt;
&lt;p&gt;$$ \epsilon = \frac{0.01}{1} = 0.01 $$&lt;/p&gt;
&lt;h3&gt;Problem 22.&lt;/h3&gt;
&lt;p&gt;We know that&lt;/p&gt;
&lt;p&gt;$$\delta_0 = 0 = \delta_{vapor}f_{vapor} + \delta_{liquid}(1-f_{vapor})$$&lt;/p&gt;
&lt;p&gt;$$\delta_{vapor}f_{vapor} = -\delta_{liquid}(1-f_{vapor})$$&lt;/p&gt;
&lt;p&gt;Assuming the experiment occurs at 290K we can use $\delta_{vapor} = -0.01$. It
is also stated in the problem that $f_{vapor} = 0.01$.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;def d_source_of_t(epsilon, d_source_0, f_source, t):
    d_sources = d_source_0-epsilon*(1-f_source**t)
    return d_sources


def problem22():
    ntrials = 400
    f_source = 0.99
    d_source_0 = 0
    epsilon = -0.01
    evap = partial(d_source_of_t, epsilon, d_source_0, f_source)
    d_liqs = [evap(t) for t in range(ntrials)]
    d_vaps = [d_liq + epsilon for d_liq in d_liqs]

    plt.figure(figsize=(12,8))
    plt.title(&amp;quot;Change in $\delta^{18}\mathrm{O}$ over iterations of evaporation at 290K,\n&amp;quot;
              &amp;quot;relative to $\delta^{18}\mathrm{O}$ of initial liquid water&amp;quot;)
    plt.plot(range(ntrials), d_vaps)
    plt.plot(range(ntrials), d_liqs)
    plt.ylabel(&amp;quot;$\delta^{18}\mathrm{O}$&amp;quot;)
    plt.xlabel(&amp;quot;Timesteps&amp;quot;)
    plt.text(40, 0.003, &amp;quot;liquid water&amp;quot;)
    plt.text(60, -0.006, &amp;quot;water vapor&amp;quot;)

problem22()
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="png" src="images/ch1_files/ch1_52_0.png" /&gt;&lt;/p&gt;
&lt;p&gt;We see that as time goes on the water vapor asymptotically approaches
0 permil relative to the initial liquid. This fits with our intuition
- as the liquid water all turns into water vapor, the water vapor
comes to represent all of the initial water. Additionally since less
and less water is changing phase in a given time period, the change in
isotopic composition also slows down as time goes on.&lt;/p&gt;
&lt;h3&gt;Problem 23.&lt;/h3&gt;
&lt;p&gt;We have two lakes, separated by mountains. Water evaporates from the
first lake, goes over the mountain into the second lake. As the water
goes over the mountain some of it condenses out, so the water that
makes it to the second lake is lighter.&lt;/p&gt;
&lt;p&gt;In part a, we calculate the magnitude of the preference.&lt;/p&gt;
&lt;p&gt;In part b, we see how this preference affects the
$\delta^{18}\mathrm{O}$ of the different lakes as a function of
transferred volume.&lt;/p&gt;
&lt;p&gt;In part c, we add in a flow of water from the second lake to the first
lake to offset the evaporation from the first lake. We then see how
the system equilibrates.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;def d_source_of_frac(func, frac_gone, resolution=0.01):
    frac_remaining = 1 - frac_gone
    final_time = log(frac_remaining, (1-resolution))
    return func(final_time)


def d_target(d_source_0, d_source, source_remaining):
    return (d_source_0 - source_remaining*d_source) / (1-source_remaining)


def problem23a(ntrials, verbose=False):
    f_source = 0.99
    d_source_0 = -0.01
    epsilon = 0.01
    condense = partial(d_source_of_t, epsilon, d_source_0, f_source)
    d_vaps = [condense(t) for t in range(ntrials)]
    d_liqs = [d_vap + epsilon for d_vap in d_vaps]
    if verbose: 
        print(&amp;quot;After {} timesteps the vapor&amp;#39;s ratio of O18 is {:.2f} permil relative&amp;quot;
              &amp;quot; to that of the lake.&amp;quot;.format(ntrials, d_vaps[-1]*1000))
    return d_vaps[-1]


def problem23b(mountain_steps, remaining_lake1 = 0.75, verbose=False):
    frac_evap = 0.01

    ntrials = 500
    f_lake2 = 0.99**mountain_steps * frac_evap
    f_lake1 = 1 - f_lake2
    f_source = f_lake1
    d_source_0 = 0
    epsilon = problem23a(mountain_steps, verbose=verbose)
    travel_over_mtn = partial(d_source_of_t, epsilon, d_source_0, f_source)
    # fracs is fractions of total that have been moved to lake2
    # thus 1-frac is the fraction remaining in lake1
    fracs = np.linspace(0, 0.99, 100)
    d_lake1s = [d_source_of_frac(travel_over_mtn, frac) for frac in fracs]
    d_lake2s = [d_target(d_source_0, d_lake1, 1-frac)
                for frac, d_lake1 in zip(fracs, d_lake1s)]

    d_lake1_25 = d_source_of_frac(travel_over_mtn, 1-remaining_lake1)
    d_lake2_25 = d_target(d_source_0, d_lake1_25, remaining_lake1)

    result = {&amp;quot;fracs&amp;quot;: fracs,
              &amp;quot;d_lake1s&amp;quot;: d_lake1s, 
              &amp;quot;d_lake2s&amp;quot;: d_lake2s,
              &amp;quot;d_lake1_25&amp;quot;: d_lake1_25,
              &amp;quot;d_lake2_25&amp;quot;: d_lake2_25,
              &amp;quot;evap_epsilon&amp;quot;: epsilon}
    return result

def problem23c(d_lake1_25, d_lake2_25, evap_epsilon, **kwargs):
    f_12 = 0.99  # prop. of lake 1 remaining after some goes to lake 2
    d_lake1s = [d_lake1_25]
    d_lake2s = [d_lake2_25]
    for n in range(250):
        d_lake1_n = d_source_of_t(evap_epsilon, d_lake1s[-1], f_12, 1)
        # now we know isotopic composition of lake2
        d_lake2_n = d_target(0, d_lake1_n, 0.75)
        # now we find the isotopic composition of lake1 which is basically
        # a weighted average
        d_lake1_n = f_12 * d_lake1_n + (1- f_12) * d_lake2_n
        d_lake1s.append(d_lake1_n)
        d_lake2s.append(d_lake2_n)

    return d_lake1s, d_lake2s


def problem23():
    lake_init_state_50 = problem23b(50, verbose=True)
    lake_init_state_75 = problem23b(75, verbose=True)

    plt.figure(figsize=(12,8))
    plt.plot(lake_init_state_50[&amp;quot;fracs&amp;quot;], lake_init_state_50[&amp;quot;d_lake1s&amp;quot;])
    plt.text(0.3, 0.005, &amp;quot;Lake 1&amp;quot;)
    plt.plot(lake_init_state_50[&amp;quot;fracs&amp;quot;], lake_init_state_50[&amp;quot;d_lake2s&amp;quot;])
    plt.text(0.6, -0.005, &amp;quot;Lake 2&amp;quot;)
    plt.title(&amp;quot;$\delta^{18}\mathrm{O}$ of lakes 1 and 2 vs. \n&amp;quot;
              &amp;quot;fraction of lake 1 transferred to lake 2&amp;quot;)
    plt.ylabel(&amp;quot;$\delta^{18}\mathrm{O}$&amp;quot;)
    plt.xlabel(&amp;quot;Fraction of lake 1 in lake 2&amp;quot;)

    d_lake1s_50, d_lake2s_50 = problem23c(**lake_init_state_50)
    d_lake1s_75, d_lake2s_75 = problem23c(**lake_init_state_75)

    plt.figure(figsize=(12,8))
    plt.plot(list(range(251)), d_lake1s_50)
    plt.text(50, 0.0025, &amp;quot;Lake 1, short mountain&amp;quot;)
    plt.plot(list(range(251)), d_lake2s_50)
    plt.text(50, -0.0095, &amp;quot;Lake 2, short mountain&amp;quot;)
    plt.plot(list(range(251)), d_lake1s_75)
    plt.text(5, 0.0035, &amp;quot;Lake 1, tall mountain&amp;quot;)
    plt.plot(list(range(251)), d_lake2s_75)
    plt.text(5, -0.011, &amp;quot;Lake 2, tall mountain&amp;quot;)
    plt.title(&amp;quot;$\delta^{18}\mathrm{O}$ of lakes 1 and 2 vs. \n&amp;quot;
              &amp;quot;time&amp;quot;)
    plt.ylabel(&amp;quot;$\delta^{18}\mathrm{O}$&amp;quot;)
    plt.xlabel(&amp;quot;time&amp;quot;)
    print(d_lake1s_50[-1], d_lake2s_50[-1], d_lake1s_75[-1], d_lake2s_75[-1])



problem23()

After 50 timesteps the vapor&amp;#39;s ratio of O18 is -13.89 permil relative to that of the lake.
After 75 timesteps the vapor&amp;#39;s ratio of O18 is -15.25 permil relative to that of the lake.
0.003333277271129784 -0.010416491472280574 0.003659119816862611 -0.011434749427695661
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="png" src="images/ch1_files/ch1_55_1.png" /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="png" src="images/ch1_files/ch1_55_2.png" /&gt;&lt;/p&gt;
&lt;p&gt;In the first graph, we see the isotopic ratio as a function of how
much water has moved from one lake to the other. We see that as more
and more water moves to lake 2 it becomes heavier and heavier,
approaching a $\delta^{18}\mathrm{O}$ of near zero. We also see that
the slopes of the lake 1 curve and the lake 2 curve start out
similarly, but diverge near the end as lake 1 dries up.&lt;/p&gt;
&lt;p&gt;In the second graph, we see the isotopic ratio as a function of time
after lake 2 begins emptying. Here we have set lake 2 to empty when it
reaches 25% the volume of lake 1. We see that the
$\delta^{18}\mathrm{O}$ approaches about 3.3 permil for Lake 1 and
about -10.4 permil for Lake 2. This process is analogous to
transferring sea water to a glacier. We can think of lake 1 as the sea
water, and lake 2 as the glacier. If all of lake 2 freezes, its
isotopic composition is the same as if it was liquid, so we have the
effect in the first graph. Now if we have lake 2, the glacier, melt at
a rate so that the volume equilibrate when lake 2 has 25% of the total
volume, we get the effect in the second graph.&lt;/p&gt;
&lt;p&gt;If we increase the mountain height we increase the difference between
lake 1 and the inflow into lake 2. This causes the equilibrium states
of lake 1 and lake 2 to shift apart, with lake 1 going up to about 3.7
permil and lake 2 going down to about -11.4 permil. This effect is
analogous to that of lowering the temperature of a glacier as both
increase the isotopic difference between the sea water and the newly
transferred glacier/lake 2 water.&lt;/p&gt;
&lt;h3&gt;Problem 24.&lt;/h3&gt;
&lt;p&gt;Let's take $\delta_a$ to be the initial $\delta^{13}\mathrm{C}$ of the
atmosphere and $\delta_{in}$ to be that of the released carbon. Let's
also use $\delta_a'$ to denote the new $\delta^{13}\mathrm{C}$ of the
atmosphere after the influx of light carbon. Then we have&lt;/p&gt;
&lt;p&gt;$$\delta_a' = f_a\delta_a + f_in \delta_{in}$$&lt;/p&gt;
&lt;p&gt;Where $f_a$ is the fraction of the total carbon that was original, and
$f_{in}$ is the fraction that makes up the influx of carbon. Since
$f_a + f_{in} = 1$ we have&lt;/p&gt;
&lt;p&gt;$$\delta_a' - \delta_a = f_in(\delta_{in} - \delta_a)$$&lt;/p&gt;
&lt;p&gt;We can see that $\delta_a$ does have an effecct on $\delta_a' -
\delta_a$. This makes sense - if the atmospheric carbon was strangely
light this release of organic carbon would actually make the
atmospheric carbon heavier.&lt;/p&gt;
&lt;p&gt;However, if we assume the atmosphere hasn't changed much since the
organic carbon was plants we can assume that the $\delta_{in}$ is -25
permil relative to $\delta_a$ and we can set $\delta_a=0$. So what
matters is really the relative difference between $\delta_{in}$ and
$\delta_a$.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;def problem24(initcarbon, d_in, influx_amt = 700, d_a = 0):
    f_a = initcarbon / (700 + initcarbon)
    f_in = 700 / (700 + initcarbon)
    Dd = f_in * (d_in - d_a)
    print(&amp;quot;When {} Gt of carbon with dC13 of {:.2f} permil is released into an atmosphere \n&amp;quot;
          &amp;quot;containing {} Gt carbon with dC13 of {:.2f} permil, the dC13 of the atmosphere \n&amp;quot;
          &amp;quot;changes by {:.2f} permil.&amp;quot;.format(influx_amt,
                                         d_in*1000.,
                                         initcarbon,
                                         d_a*1000.,
                                         Dd*1000.))

problem24(700, -0.025)
problem24(1400, -0.025)
problem24(700, -0.050)
problem24(70000, -0.025, influx_amt=7000)


When 700 Gt of carbon with dC13 of -25.00 permil is released into an atmosphere 
containing 700 Gt carbon with dC13 of 0.00 permil, the dC13 of the atmosphere 
changes by -12.50 permil.
When 700 Gt of carbon with dC13 of -25.00 permil is released into an atmosphere 
containing 1400 Gt carbon with dC13 of 0.00 permil, the dC13 of the atmosphere 
changes by -8.33 permil.
When 700 Gt of carbon with dC13 of -50.00 permil is released into an atmosphere 
containing 700 Gt carbon with dC13 of 0.00 permil, the dC13 of the atmosphere 
changes by -25.00 permil.
When 7000 Gt of carbon with dC13 of -25.00 permil is released into an atmosphere 
containing 70000 Gt carbon with dC13 of 0.00 permil, the dC13 of the atmosphere 
changes by -0.25 permil.
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We see that in our simulation of the PETM we have underestimated the
amount of lightening by a factor of five. Assuming the masses of the
carbon flows given in the book are not wildly inaccurate, this
difference must be mostly accounted for by the assumption that the
$\delta^{13}\mathrm{C}$ of carbonates in the ocean mirrors the shift
in $\delta^{13}\mathrm{C}$ of the entire carbon pool, and that the
carbon is distributed evenly throughout the carbon pool. For example,
if the lighter carbon was quickly absorbed into the oceans and
deposited, the carbonates would be lighter than the pool as a whole.&lt;/p&gt;
&lt;h3&gt;Problem 25.&lt;/h3&gt;
&lt;p&gt;We look at an atmosphere that has a $\delta^{13}\mathrm{C}$ of -6
permil and introduce photosynthesis. We compare the effect of
photosynthesis without any additional outgassing to compensate for
organic burial to that of photosynthesis with outgassing.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="s-Atom"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;problem25&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s-Atom"&gt;outgas_rate&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s-Atom"&gt;ntimesteps&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s-Atom"&gt;photosynthesis_rate&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mf"&gt;0.01&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="s-Atom"&gt;:&lt;/span&gt;
    &lt;span class="s-Atom"&gt;#&lt;/span&gt; &lt;span class="s-Atom"&gt;outgas&lt;/span&gt; &lt;span class="s-Atom"&gt;rate&lt;/span&gt; &lt;span class="s-Atom"&gt;as&lt;/span&gt; &lt;span class="s-Atom"&gt;a&lt;/span&gt; &lt;span class="s-Atom"&gt;fraction&lt;/span&gt; &lt;span class="s-Atom"&gt;of&lt;/span&gt; &lt;span class="s-Atom"&gt;initial&lt;/span&gt; &lt;span class="s-Atom"&gt;atmospheric&lt;/span&gt; &lt;span class="s-Atom"&gt;mass&lt;/span&gt;
    &lt;span class="s-Atom"&gt;photosynthesis_rate&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mf"&gt;0.01&lt;/span&gt;
    &lt;span class="s-Atom"&gt;d_outgas&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;0.006&lt;/span&gt;
    &lt;span class="s-Atom"&gt;d_org&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s-Atom"&gt;d_outgas&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mf"&gt;0.025&lt;/span&gt;
    &lt;span class="s-Atom"&gt;d_atms&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s-Atom"&gt;d_outgas&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="s-Atom"&gt;d_orgs&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s-Atom"&gt;d_org&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="s-Atom"&gt;for&lt;/span&gt; &lt;span class="s-Atom"&gt;t&lt;/span&gt; &lt;span class="s-Atom"&gt;in&lt;/span&gt; &lt;span class="nf"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s-Atom"&gt;ntimesteps&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="s-Atom"&gt;:&lt;/span&gt;
        &lt;span class="s-Atom"&gt;d_atm_t&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nf"&gt;d_source_of_t&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;0.025&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s-Atom"&gt;d_outgas&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="s-Atom"&gt;photosynthesis_rate&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s-Atom"&gt;t&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="s-Atom"&gt;#outgassing&lt;/span&gt; &lt;span class="s-Atom"&gt;adjustment&lt;/span&gt;
        &lt;span class="s-Atom"&gt;d&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="s-Atom"&gt;outgas_rate&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="s-Atom"&gt;d_atm_t&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s-Atom"&gt;outgas_rate&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="s-Atom"&gt;d_outgas&lt;/span&gt;
        &lt;span class="s-Atom"&gt;d_atms&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s-Atom"&gt;d&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

        &lt;span class="s-Atom"&gt;d_org_t&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s-Atom"&gt;d_atms&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mf"&gt;0.025&lt;/span&gt;
        &lt;span class="s-Atom"&gt;d_orgs&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s-Atom"&gt;d_org_t&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="s-Atom"&gt;return&lt;/span&gt; &lt;span class="s-Atom"&gt;d_atms&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s-Atom"&gt;d_orgs&lt;/span&gt;

&lt;span class="s-Atom"&gt;timesteps&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;250&lt;/span&gt;
&lt;span class="s-Atom"&gt;d_atms_no_out&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s-Atom"&gt;d_orgs_no_out&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nf"&gt;problem25&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s-Atom"&gt;timesteps&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="s-Atom"&gt;d_atms&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s-Atom"&gt;d_orgs&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nf"&gt;problem25&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;0.01&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s-Atom"&gt;timesteps&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s-Atom"&gt;photosynthesis_rate&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mf"&gt;0.01&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="s-Atom"&gt;plt&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s-Atom"&gt;figsize=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="s-Atom"&gt;plt&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;title&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="err"&gt;&amp;quot;$&lt;/span&gt;&lt;span class="s-Atom"&gt;\delta^&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;13&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="s-Atom"&gt;\mathrm&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nv"&gt;C&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="s-Atom"&gt;of&lt;/span&gt; &lt;span class="s-Atom"&gt;atmospheric&lt;/span&gt; &lt;span class="s-Atom"&gt;and&lt;/span&gt; &lt;span class="s-Atom"&gt;organic&lt;/span&gt; &lt;span class="s-Atom"&gt;carbon&lt;/span&gt; &lt;span class="s-Atom"&gt;vs&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt; &lt;span class="s-Atom"&gt;years&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;)&lt;/span&gt;
&lt;span class="s2"&gt;plt.xlabel(&amp;quot;&lt;/span&gt;&lt;span class="nf"&gt;time&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s-Atom"&gt;years&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;)&lt;/span&gt;
&lt;span class="s2"&gt;plt.ylabel(&amp;quot;&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="s-Atom"&gt;\delta^&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;13&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="s-Atom"&gt;\mathrm&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nv"&gt;C&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s-Atom"&gt;permil&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;)&lt;/span&gt;
&lt;span class="s2"&gt;plt.plot(range(timesteps), d_atms_no_out[:-1])&lt;/span&gt;
&lt;span class="s2"&gt;plt.text(5, 0.006, &amp;quot;&lt;/span&gt;&lt;span class="s-Atom"&gt;atmosphere&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s-Atom"&gt;no&lt;/span&gt; &lt;span class="s-Atom"&gt;outgassing&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;)&lt;/span&gt;
&lt;span class="s2"&gt;plt.plot(range(timesteps), d_orgs_no_out[:-1])&lt;/span&gt;
&lt;span class="s2"&gt;plt.text(5, -0.019, &amp;quot;&lt;/span&gt;&lt;span class="s-Atom"&gt;organic&lt;/span&gt; &lt;span class="s-Atom"&gt;carbon&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s-Atom"&gt;no&lt;/span&gt; &lt;span class="s-Atom"&gt;outgassing&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;)&lt;/span&gt;
&lt;span class="s2"&gt;plt.plot(range(timesteps), d_atms[:-1])&lt;/span&gt;
&lt;span class="s2"&gt;plt.text(37, 0, &amp;quot;&lt;/span&gt;&lt;span class="s-Atom"&gt;atmosphere&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s-Atom"&gt;outgassing&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;)&lt;/span&gt;
&lt;span class="s2"&gt;plt.plot(range(timesteps), d_orgs[:-1])&lt;/span&gt;
&lt;span class="s2"&gt;plt.text(37, -0.026, &amp;quot;&lt;/span&gt;&lt;span class="s-Atom"&gt;organic&lt;/span&gt; &lt;span class="s-Atom"&gt;carbon&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s-Atom"&gt;outgassing&lt;/span&gt;&lt;span class="err"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;






&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="s-Atom"&gt;matplotlib&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="s-Atom"&gt;text&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nv"&gt;Text&lt;/span&gt; &lt;span class="s-Atom"&gt;at&lt;/span&gt; &lt;span class="mh"&gt;0x2b6a33765748&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="png" src="images/ch1_files/ch1_61_1.png" /&gt;&lt;/p&gt;
&lt;p&gt;If we were to take a core sample we would find a similar curve to
this, but it would be compressed into a log scale on the X
axis. because it takes longer to lay down a certain depth of organic
carbon as less and less carbon is being taken out of the atmosphere.&lt;/p&gt;
&lt;p&gt;We see that the outgassing has only a slight downwards effect on the
photosynthesis effect as a whole. This isn't affected by the total
amount of carbon in the system - however, it is affected by the rate
of outgassing required. Higher burial rate&lt;/p&gt;
&lt;p&gt;The mass of $\mathrm{O}_2$ in the atmosphere increases without bound
in the outgassing case. This does not happen because there are
critters like us that turn it back into CO2.&lt;/p&gt;
&lt;h3&gt;Problem 26.&lt;/h3&gt;
&lt;p&gt;We have some benthic foram data that shows the historical levels of
$\delta^{13}\mathrm{C}$ and $\delta^{18}\mathrm{O}$. We would like to
see how this data matches up with the mechanisms we modeled in
problems 23 and 25.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;def d13C_by_f_org(f_org):
    &amp;quot;&amp;quot;&amp;quot;Get equilibrium d13C of atmosphere by burial rate, assuming equilibrium
    between photosynthesis and burial.
    &amp;quot;&amp;quot;&amp;quot;
    outgas_d = -0.006
    f_carb = 1 - f_org
    return (outgas_d + f_carb * (-0.025)) * 1000


def d18O_by_ice_volume(ice_volume):
    &amp;quot;&amp;quot;&amp;quot;Get equilibrium d13O of atmosphere by burial rate, assuming equilibrium
    between photosynthesis and burial.
    &amp;quot;&amp;quot;&amp;quot;
    ocean_volume = 1 - ice_volume
    mountain_steps = 50
    init_state = problem23b(mountain_steps, ocean_volume)
    timesteps = 1000
    d_oceans, d_glaciers = problem23c(**init_state)

    return (1-ice_volume) * d_glaciers[-1] * 1000

def problem26():
    benthic = pd.read_csv(&amp;quot;data/Chapter1Data/marineCores/BenthicTropPacific.txt&amp;quot;,
                          skiprows=41, 
                          delim_whitespace=True)
    d13C = benthic[&amp;quot;d13Cforams-b&amp;quot;]
    d13Crange = max(d13C) - min(d13C)
    d13Cstddev = benthic.std(axis=0)[&amp;quot;d13Cforams-b&amp;quot;]
    print(&amp;quot;d13C varied by {:.2} permil and the stddev was {:.2} permil.&amp;quot;
          .format(d13Crange, d13Cstddev))
    burial_space = np.linspace(0, 1, 100)
    d13C_burial = [d13C_by_f_org(r) for r in burial_space]
    plt.figure(figsize=(12, 8))
    plt.title(&amp;quot;$\delta^{13}\mathrm{C}$ of carbonates vs. burial rate&amp;quot;)
    plt.plot(burial_space, d13C_burial)
    d18O = benthic[&amp;quot;d18Oforams-b&amp;quot;]
    d18Orange = max(d18O) - min(d18O)
    d18Ostddev = benthic.std(axis=0)[&amp;quot;d18Oforams-b&amp;quot;]
    print(&amp;quot;d18O varied by {:.2} permil and the stddev was {:.2} permil.&amp;quot;
          .format(d18Orange, d18Ostddev))
    icevol_space = np.linspace(0, 0.999, 50)
    d18O_icevol = [d18O_by_ice_volume(v) for v in icevol_space]
    plt.figure(figsize=(12, 8))
    plt.title(&amp;quot;$\delta^{18}\mathrm{O}$ of the ocean vs. burial rate&amp;quot;)
    plt.plot(icevol_space, d18O_icevol)
    plt.gca().ticklabel_format(useOffset=False)


problem26()


d13C varied by 1.4 permil and the stddev was 0.24 permil.
d18O varied by 2.2 permil and the stddev was 0.38 permil.
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="png" src="images/ch1_files/ch1_64_1.png" /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="png" src="images/ch1_files/ch1_64_2.png" /&gt;&lt;/p&gt;
&lt;p&gt;We see that we would need to vary the burial rate by about 5% of the
total volume of the atmosphere to achieve the maximum variation in
$\delta^{13}\mathrm{C}$ we see historically. We also see that the
higher the burial rate, the higher the $\delta^{13}\mathrm{C}$ of
carbonates. This makes sense as the higher the burial rate, the more
light carbon is taken out of the atmosphere, causing the remaining
carbon to be relatively heavy.&lt;/p&gt;
&lt;p&gt;We also see that we would need to vary the fraction of the oceans
locked in ice by almost 20% to achieve the maximum variation in
historical $\delta^{18}\mathrm{O}$. We also see that as more of the
oceans freeze, the oceans have more $\delta^{18}\mathrm{O}$. This
makes sense as glaciers tend to be isotopically lighter than the
oceans.&lt;/p&gt;
&lt;p&gt;In an earlier problem we assumed a burial rate of around 1% - this
seems to indicate that a 5% fluctuation is very large, whereas a 20%
fluctuation in the ice volume seems more plausible, and wins my vote for
"more plausible extreme condition."&lt;/p&gt;</summary></entry><entry><title>Let's Read Principles of Planetary Climate, Chapter 1</title><link href="http://www.johnxia.me/lets-read-principles-of-planetary-climate-chapter-1.html" rel="alternate"></link><updated>2014-11-30T00:00:00-06:00</updated><author><name>John Xia</name></author><id>tag:www.johnxia.me,2014-11-30:lets-read-principles-of-planetary-climate-chapter-1.html</id><summary type="html">&lt;p&gt;I bought a textbook called &lt;a href="http://www.amazon.com/gp/product/0521865565/"&gt;&lt;em&gt;Principles of Planetary Climate&lt;/em&gt;&lt;/a&gt;, by
&lt;a href="http://geosci.uchicago.edu/~rtp1/"&gt;Raymond Pierrehumbert&lt;/a&gt;. It seems pretty interesting and I am going
to write some sparse notes on the chapters as I go through. It's like
live-blogging. I am live-blogging a textbook. I hope this is
informative, but mostly it is to help me digest the material.&lt;/p&gt;
&lt;h3&gt;Table of Contents&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href="#1.1"&gt;Overview&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#1.2"&gt;Close to Home&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#1.3"&gt;Into Deepest Time: Faint Young Sun and Habitability of the Earth&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#1.4"&gt;Goldilocks in Space: Earth, Mars, and Venus&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#1.5"&gt;Other Solar System Planets and Satellites&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#1.6"&gt;Farther Afield: Extrasolar Planets&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#1.7"&gt;Digression: About Climate Proxies&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#1.8"&gt;The Proterozoic Climate Revisited: Snowball Earth&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#1.9"&gt;The Hothouse/Icehouse Dichotomy&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#1.10"&gt;Pleistocene Glacial-Interglacial Cycles&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#1.11"&gt;Holocene Climate Variation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#1.12"&gt;Back to Home: Global Warming&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#1.13"&gt;The Fate of the Earth and the Lifetime of Biospheres&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;&lt;a name="1.1"&gt;&lt;/a&gt;1.1 - Overview&lt;/h3&gt;
&lt;p&gt;This chapter will mostly be pointing out interesting things
and then assuring me that everything will be explained later in the
book. "We hope not to be too Earth-centric," he says. This is promising.&lt;/p&gt;
&lt;h3&gt;&lt;a name="1.2"&gt;&lt;/a&gt;1.2 - Close to Home&lt;/h3&gt;
&lt;p&gt;This is a chapter that is mainly simple questions with interesting
answers. There are lots of questions we can ask about how the Earth
works just based in our everyday experience. For example, what causes
the seasons? Why is it warmer sometimes than others? Does the Sun warm
the Earth? What cools the Earth? If nothing cools the Earth, how do we
avoid just getting hotter and hotter? and other basic questions that
people have been asking for millenia.&lt;/p&gt;
&lt;p&gt;There's a quick detour into different temperature scales (Celsius
vs. Kelvin vs. Fahrenheit) and talks about their advantages and
disadvantages.&lt;/p&gt;
&lt;p&gt;What's the deal with air? How does it affect the climate of a planet?
The Moon doesn't have air, how hot/cold does it get? Very. We know
this because we can look at the heat radiating from it. This also answers
our earlier question about what cools the Earth.&lt;/p&gt;
&lt;p&gt;Now we can think about how the existence of an atmosphere and its
composition affects the cooling of a planet, and here is the first
mention of greenhouse gases.&lt;/p&gt;
&lt;h3&gt;&lt;a name="1.3"&gt;&lt;/a&gt;1.3 - Into DEEPEST TIME: Faint Young Sun and Habitability of the Earth&lt;/h3&gt;
&lt;p&gt;The Solar System is constantly changing. There's a quick rundown of
&lt;a href="https://en.wikipedia.org/wiki/History_of_the_Earth"&gt;Earth's formation and early years&lt;/a&gt;. The big point is that liquid water
has been widespread on Earth pretty consistently for at least the last
3 billion years, and sporadically for even longer.&lt;/p&gt;
&lt;p&gt;This is kind of surprising! 3 billion years is a long time and, in
fact, the sun was about 20% dimmmer back then. This should make the
Earth too cold to have liquid water on the surface. There must have
been incredible amounts of greenhouse gases early on to keep the Earth
warm. But that atmosphere would be stiflingly hot today, so somewhere
in there the atmospheric composition has undergone massive changes.&lt;/p&gt;
&lt;h3&gt;&lt;a name="1.4"&gt;&lt;/a&gt;1.4 - Goldilocks in Space: Earth, Mars, and Venus&lt;/h3&gt;
&lt;p&gt;Historically we have often viewed Venus as a pleasant and habitable
place not unlike Earth, but as we now know it's... not. We also know
that Mars is really cold.&lt;/p&gt;
&lt;p&gt;So we see that we are kind of in between two extremes. The big
question here is: what "went wrong" on Venus and Mars, and how did we
somehow avoid both fates?&lt;/p&gt;
&lt;p&gt;Some interesting, smaller questions that might help us answer the big
one include:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Venus has a very new surface - by this I mean that there are not a
  lot of craters around. "The crust may have been engulfed and
  resurfaced as recently as 500 million years ago," says the book. Why
  did this happen on Venus but not on Earth?&lt;/li&gt;
&lt;li&gt;We see that there was once liquid on Mars, a long time ago. But this
  was when the Sun was dimmer. So there must have been a very dense,
  greenhousey atmosphere. What happened to it? We'll touch on this
  later, apparently.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;We also talk briefly about Venus' &lt;a href="https://en.wikipedia.org/wiki/Runaway_greenhouse_effect"&gt;runaway greenhouse effect&lt;/a&gt; here. I am
glad it did not occur here, though I am interested in the specifics of
why not. Pierrehumbert keeps bringing up how cool theories come from
combining different bits of basic science in novel ways.&lt;/p&gt;
&lt;h3&gt;&lt;a name="1.5"&gt;&lt;/a&gt;1.5 - Other Solar System Planets and Satellites&lt;/h3&gt;
&lt;p&gt;Let's talk about gas giants! Apparently the atmospheric flow really
affects their thermal structure, which could be pretty cool later on.
Long-lived storms like the Great Red Spot are also
interesting. Unfortunately, there isn't going to be much fluid
dynamics in this book, though I guess I can finally finish reading &lt;a href="http://www.amazon.com/Life-Leaf-Steven-Vogel/dp/0226859398/"&gt;The
Life of a Leaf&lt;/a&gt; to get some intuition for this stuff.&lt;/p&gt;
&lt;p&gt;I had learned of Uranus and Neptune as "gas giants" but here he
reclassifies them as "ice giants" because of their
composition. They're made of an "ice mantle", which is both (a) a
great name for a Magic card and (b) "actually a hot, slushy mixture"
more like a "water-ammonia ocean."&lt;/p&gt;
&lt;p&gt;Here's a cool way of thinking of these four planets: on each of these,
there is a temperature gradient from cold to hot as you go deeper into
the atmosphere. Thus there is a band of altitude where the temperature
is appropriate for liquid water. So life could presumably exist
there. Pierrehumbert points out that, after all, life originated in
the oceans here on Earth.&lt;/p&gt;
&lt;p&gt;Now we talk about Titan and Europa. Titan with its methane oceans,
full hydrological cycle, and dense nitrogen atmosphere (how is that
even still around?); Europa with its ice crust and liquid water
mantle. My favorite line of this book so far is: "At the cold
temperatures of Europa's surface, as on Titan, water ice is basically
a rock, just as sand can be considered an 'ice' of SiO&lt;sub&gt;2&lt;/sub&gt; on Earth."
Really blowing my Earth-centric mind.&lt;/p&gt;
&lt;p&gt;And of course, he ends this section with this: "these moons are, as
has been said, 'always icy, never dull.'"&lt;/p&gt;
&lt;h3&gt;&lt;a name="1.6"&gt;&lt;/a&gt;1.6 - Farther afield: Extrasolar Planets&lt;/h3&gt;
&lt;p&gt;There's a bit about exoplanet detection and &lt;a href="https://en.wikipedia.org/wiki/Stellar_evolution"&gt;stellar evolution&lt;/a&gt;
here. Basically we are looking for planets orbiting relatively stable
stars at appropriate orbits. Turns out we haven't found any at the
time of this book's publishing, but we are really churning out the
exoplanet discoveries nowadays so who knows? In any case these planets
present interesting new climates to study, and new edge cases for us
to think about our theories with. Exoplanets are just really far away
and so it's pretty hard to get details about them (and it's incredible
that we've learned as much as we have).&lt;/p&gt;
&lt;h2&gt;&lt;a name="1.7"&gt;&lt;/a&gt;1.7 - Digression: About Climate Proxies&lt;/h2&gt;
&lt;p&gt;So we haven't really done a great job, as a species, of recording the
climate history of the Earth. Especially since we haven't been around
for pretty much all of it. But the Earth itself, and other lifeforms
that have been on it, have been shaped by the climate, and we can use
such &lt;em&gt;climate proxies&lt;/em&gt; to infer some details of the climate in the
distant past. And of course people are figuring out new ways to do
this as I write.&lt;/p&gt;
&lt;p&gt;For example, certain animals are cold-blooded, so they can't live in
cold climates, so if we find them in the fossil record at a time we
know that it can't have been that cold, then and there. Or some
animals use different substances to make their shells based on the
temperature and we can analyze that. Of course these assume that the
biology of these animals is not too different from the ones we see
today, which admittedly is a little sketchy.&lt;/p&gt;
&lt;p&gt;We can also look at sediments - if we see rocks that have deformed
what was once the ocean floor, we know that they were probably carried
out onto the open ocean by ice floes. That tells us something about
the temperature at that time as well.&lt;/p&gt;
&lt;p&gt;We can even look at the chemical composition of the ocean that is
preserved in the ocean floor - but we need to be careful to avoid
being misled by samples that have been altered by later contact with
the ocean.&lt;/p&gt;
&lt;p&gt;We can also look at differences between isotopes to see some
interesting effects. For example, lighter isotopes tend to be more
reactive as they have higher velocity at the same temperature. They
also evaporate and leave the atmosphere more easily. There are also
subtle effects in that some reactions prefer different isotopes based
on the temperature, and, as such, we can infer the temperature at the
time the reactions occured in a sample by looking at the isotopic
distribution.&lt;/p&gt;
&lt;p&gt;For example, photosynthesis likes lighter carbon, so the carbon in
plants is lighter than the carbon in the air (all this is by very
small amounts, like 0.25%). Carbon participates in "the carbon cycle,"
which involves carbon being outgassed from the Earth and then buried
again somehow.&lt;/p&gt;
&lt;p&gt;We know that carbon is outgassed from the Earth with a specific
isotope fraction. We also know that carbon is basically either buried
as organic matter or as a carbonate, so if we look at the isotope
fractions of both organic matter and a carbonate at a certain time we
can figure out the isotope fraction of the air at the time too!&lt;/p&gt;
&lt;p&gt;This lets us find anomalies known as "carbon isotope excursions",
which tend to correspond to times when the carbon cycle was disturbed
somehow.&lt;/p&gt;
&lt;p&gt;The amount of ice and the ocean temperature also affect the isotope
fraction of ocean water, which is preserved in certain fossils, so we
can use these fossils to determine those aspects about our water
supply in the distant past. Unfortunately it is difficult to tell the
effect of ice and the effect of water temperature apart, so there is
some sleuthing involved here. Turns out that the fossils we use are
easily distinguishable between the ones that live on the surface and
the ones that live on the sea floor. The sea floor has a much more
stable temperature than the surface, so we can compare the readings
from the two different types of fossils to get a better idea of the
true temperature. Additionally, there are times during which, by other
means, we can determine that there was little to no ice coverage. Then
any isotope fraction effects must be due to temperature.&lt;/p&gt;
&lt;p&gt;Ok! Now that we know a bit more about how we know about the past, we
can get back to talking about the past.&lt;/p&gt;
&lt;h3&gt;&lt;a name="1.8"&gt;&lt;/a&gt;1.8 - The Proterozoic Climate Revisited: Snowball Earth&lt;/h3&gt;
&lt;p&gt;This picture from Wikipedia represents the major bits of geological
time that will be important.
&lt;img alt="" src="http://upload.wikimedia.org/wikipedia/commons/thumb/7/77/Geologic_Clock_with_events_and_periods.svg/803px-Geologic_Clock_with_events_and_periods.svg.png" /&gt;&lt;/p&gt;
&lt;p&gt;A short aside on continents! We haven't talked about them
yet. Pierrehumbert says "continents consist of light material that has
floated to the outer portions of the solid Earth and beeen
incorporated into the crust."  I'd learned that the crust was floating
on top of the mantle in Magic School Bus, but had never realized that
meant that the mantle was denser than the crust.&lt;/p&gt;
&lt;p&gt;While they are floating around on the outside of the Earth the
continents are also affecting the climate. They are the primary place
where weatherable rocks are weathered, regulating atmospheric
CO&lt;sub&gt;2&lt;/sub&gt;; they affect the shape of the oceans and how they
transport heat across the Earth; and they allow for new forms of life
which affect the climate in myriad ways.&lt;/p&gt;
&lt;p&gt;We only really know what the continents looked like starting from the
end of the Proterozoic (still about 600 Mya!).&lt;/p&gt;
&lt;p&gt;During the Proterozoic, the atmosphere and oceans became more
oxygenated. Life and the climate had to adjust to accomodate
this. This oxygenation occured in spurts, and by the end of the
Proterozoic the atmosphere was probably about as oxygen-rich as the
one today.&lt;/p&gt;
&lt;p&gt;By looking at climate proxies we find there is lots of activity at the
beginning and end of the Proterozoic (the Paleoproterozoic and
Neoproterozoic, respectively). However, the billion years between
these two are known as "the most boring period in Earth history."
Pierrehumbert calls it the Big Yawn. If we knew more about it, we
would probably be able to find all sorts of interesting things going
on, but as it stands, we have no evidence of excitement during this
period. No glaciation, no anything. Eukaryotic life does appear at the
very beginning of this but don't seem to have caused a splash - maybe
they were the cause of this incredibly long period of stability.&lt;/p&gt;
&lt;p&gt;In any case, at the beginning of the Proterozoic there was a Great
Oxidation Event. There's tons of evidence. For example, banded iron
formations, which require low oxygen levels, abruptly stop occurring
at the beginning of the Proterozoic. We see huge carbon excursions,
indicating a huge transition in the carbon cycle, such as a large
increased proportion of organic carbon burial. It looks like the
oxygen levels skyrocketed and then crashed again as the banded iron
formations returned. We see several periods of glaciation, one of
which (called the Makganyene) sees glaciers even in the tropics.&lt;/p&gt;
&lt;p&gt;By 1.7 Bya we see that the atmosphere has about 10% as much oxygen as
it does now. Before the Proterozoic it was closer to 0.001%, so 10% is
pretty high. This number stays constant throughout the Big Yawn, until
700 Mya.&lt;/p&gt;
&lt;p&gt;The Neoproterozoic brings back the excitement of the Paleoproterozoic,
with carbon excursions, glaciations, and more. There's a mysterious
carbon isotope excursion that is not associated with any "Snowball
event." It's called the "Shuram excursion," and during this time the
carbon in the carbonates (which tends to be heavy, remember, to offset
the light organic carbon) was 1.2% lighter than our standard
measurement. In a typical Snowball event we see the carbonates at
maybe -0.5%, so this is a Big Deal. We have no idea what happened -
the best guess is that there was "a transient reorganization of the
carbon cycle, in which a large isotopically light pool of suspended
organic carbon in the ocean is oxidized and deposited as carbonate."&lt;/p&gt;
&lt;p&gt;Lots of stuff is going on with the oxygen, too. It's hard to tell
exactly, but what we do know for sure is that by the end of the
Neoproterozoic oxygen levels everywhere, down to the bottom of the
ocean, were similar to present levels.&lt;/p&gt;
&lt;p&gt;Pierrehumbert: "A very Big Question is why all this excitement
 suddenly resumed after a billion years of stasis."&lt;/p&gt;
&lt;p&gt;There are also lots of Big Questions specifically about Snowball
events, where the Earth is frozen over. How do they start? After
starting how do they end again? Is it guaranteed that they do end, or
have we just been lucky with them so far?&lt;/p&gt;
&lt;h3&gt;&lt;a name="1.9"&gt;&lt;/a&gt;1.9 - The Hothouse/Icehouse Dichotomy&lt;/h3&gt;
&lt;p&gt;Though we are used to our current ice caps, we should recognize that
for significant parts of Earth's history, the poles were warm enough
that the poles were not frozen. About 50 million years ago, for
example, we use oxygen isotope information to calculate that, even at
the poles, the coldest temperature was around 15 C or 60 F. So the
poles were ice-free, even in the winters. This sort of climate is
known as a "hothouse climate."&lt;/p&gt;
&lt;p&gt;A few million years before this point there was a sudden dip in heavy
oxygen - this indicates a spike in temperature of about 4 C. It's
called the PETM (Paleocene-Eocene Thermal Maximum) and took about
10,000 years to spike and 200,000 years to subside again. We're not
sure what caused it and have seen nothing else as drastic as it. For
some context consider that between 1920 and 2005 we have increased the
Earth's surface temperature by almost 1 C. That's less than 100
years, or 1% of the time it took the PETM to set in.&lt;/p&gt;
&lt;p&gt;The opposite, a climate where there is ice at the poles, is known as
an "icehouse climate." We are in one of these now.&lt;/p&gt;
&lt;p&gt;Some things to look forward to: we'll be looking at the science of the
dinosaur asteroid's effect on climate, and at different possible
theories of the PETM. Eventually.&lt;/p&gt;
&lt;p&gt;Once we hit the Phanerozoic, 600 Mya, we have a decent idea of what
the continent(s) looked like. &lt;a href="http://cpgeosystems.com/globehighres.html"&gt;Here&lt;/a&gt; is a cool site where you can
look at maps of what the Earth looked like back then. It's probable
that this changing geography influenced climate. Surely having no land
at the poles makes it difficult for glaciers to exist. On the other
hand, we get land at the poles long before we get ice caps and
significant glaciers, so this is not the only factor in
icehouse/hothouse transitions. CO&lt;sub&gt;2&lt;/sub&gt; is a likely
suspect. There's a lot to say about hothouses and icehouses, and their
role in the evolution of the biosphere, but in a recurring theme,
we'll touch on it later as we've learned more of the science.&lt;/p&gt;
&lt;h3&gt;&lt;a name="1.10"&gt;&lt;/a&gt;1.10 - Pleistocene Glacial-Interglacial Cycles&lt;/h3&gt;
&lt;p&gt;It is important to remember that "icehouse" is not the same as an "ice
age." An icehouse climate is simply a climate where we have permanent
ice at one or both poles for millions of years. An ice age is a surge
in ice sheet volume during an icehouse climate. The time between ice
ages is called an interglacial, even though glaciers and ice caps
still exist.&lt;/p&gt;
&lt;p&gt;We start to see these ice ages about 4 million years ago. I think the
reason we see ice ages only recently is only because we don't have
enough data from earlier to see these relatively quick fluctuations.
By about 2 Mya the ice ages have settled into a rhythm, about one
every 40,000 years. About 800,000 years ago, the ice ages slow down -
we only get one every hundred thousand years. We also see that the ice
builds up slowly but disappears quickly.&lt;/p&gt;
&lt;p&gt;We don't have a perfect answer for why these ice ages have such
periodicity, and why the periodicity would change. We do think,
however, that the interplay between our (slightly) eccentric orbit and
our axial tilt is important. Right now, for example, winter for the
Northern Hemisphere is when Earth is closest to the sun - so the
winters are slightly warmer than they would be if the opposite were
true. More on this stuff later (in this article, even!). All this was
first formulated by a guy called Milankovic, and there is still active
research on how these Milankovic cycles affect climate on Earth. We
can even use Milankovic cycles to think about Mars, but we have so
little paleoclimate data for Mars that we can't really make any
detailed conclusions.&lt;/p&gt;
&lt;p&gt;Much of what we know about ice ages comes from ice cores in the
Antarctic and Greenland. We can look at the isotopes of water, as well
as the composition of air trapped in ice bubbles. We see that the
CO&lt;sub&gt;2&lt;/sub&gt; fluctuations sync up well with the temperature
fluctuations. We're not sure why there is such a CO&lt;sub&gt;2&lt;/sub&gt; cycle,
and if it causes or is caused by the ice ages, or if there is a causal
relationship at all. But we do know that CO&lt;sub&gt;2&lt;/sub&gt; is a
greenhouse gas and does warm the Earth, and a decrease in
CO&lt;sub&gt;2&lt;/sub&gt; will decrease the temperature.&lt;/p&gt;
&lt;p&gt;In the Greenland ice cores we see that there's been significant
temperature variation on the scale of about 1000 years throughout the
past 100,000 years. This activity, called "millenial variability," is
especially prominent between 60,000 and 10,000 years ago. As we come
out of the most recent ice age, we see an abrupt warming event (called
the Bolling warm period), followed by an abrupt cooling event (called
the Younger Dryas), and then - stability. Ten thousand years of
relatively stable climate, known as the Holocene. You can see these
millenial variations below:&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="http://geology.gsapubs.org/content/32/2/109/F1.large.jpg" /&gt;&lt;/p&gt;
&lt;h3&gt;&lt;a name="1.11"&gt;&lt;/a&gt;1.11 - Holocene Climate Variation&lt;/h3&gt;
&lt;p&gt;Of course, the Holocene has been very short, so crazy climate
shenanigans have had no time to happen yet. But the suspicious lack of
millenial variation is worth investigating more, and there are still
points of interest in the Holocene.&lt;/p&gt;
&lt;p&gt;Let's go back to Milankovic cycles, or, more broadly, the precession
cycles. The tilt-based seasons and the distance-based seasons line up
approximately once every 22,000 years. Currently, northern winter is
when the Earth is farthest from the sun, and vice versa. This gives
the northern hemisphere cooler summers and warmer winters. 11,000
years ago it was exactly opposite. However, for some reason, the
warmest northern summers occurred about seven thousand years ago, a
delay of some 4 thousand years. This time is called the "altithermal."
During this time summer temperatures were 2-4 C warmer than they are
now. The details of how the altithermal affected climate are active
subjects of research now.&lt;/p&gt;
&lt;p&gt;The precessional cycle, perhaps unsurprisingly, affected precipitation
patterns in the lower latitudes. The Sahara was wet (well, wet enough
to be savannah grassland) from about 14,500 years ago to 4700 years
ago. There is also some evidence that mountain glaciers are also
related to the precessional cycle - the glaciers on Kilimanjaro were
laid down when the Sahara was wet, for example.&lt;/p&gt;
&lt;p&gt;There is also the Little Ice Age, which was a time from about
1500-1800 during which temperate climes in the northern hemisphere
were cooled by about 0.5 C. We think this is because of a transient
dimming of the Sun, but there are many other factors that may be
involved. Because this is such a subtle effect, the principles behind
it are harder to coax out.&lt;/p&gt;
&lt;h3&gt;&lt;a name="1.12"&gt;&lt;/a&gt;1.12 - Back to Home: Global Warming&lt;/h3&gt;
&lt;p&gt;So we know that CO&lt;sub&gt;2&lt;/sub&gt; has has a big effect on the climate
throughout Earth's history. We also know that life has had an impact
on the carbon cycle. Much organic carbon has been sequestered without
oxidizing over the past billions of years. Now we are digging some
specific forms of this up and oxidizing millions of years' worth of
sequestered carbon in a few centuries.&lt;/p&gt;
&lt;p&gt;We are substantially affecting the carbon cycle. Don't let anyone tell
you otherwise. We output 8 gigatonnes of carbon in 2005, and
this rate has been growing since then. There were about 600 gigatonnes
in the atmosphere in pre-industrial times, so that doesn't sound like
too much. But this means that at 2005 levels, we would be doubling the
amount of carbon in the atmosphere in 75 years.&lt;/p&gt;
&lt;p&gt;Plants worldwide "fix" about 50 gigatonnes of carbon each year, but
only 0.4 gigatonnes per year are truly sequestered, with the rest being
recycled into the air by bacteria. The natural outgassing of
CO&lt;sub&gt;2&lt;/sub&gt; leads to about 0.1 gigatonnes per year. Our output of 8
gigatonnes per year completely dwarfs these fluxes.&lt;/p&gt;
&lt;p&gt;The oceans have acted as a buffer for us, absorbing about half of the
carbon we have emitted to date. The rate at which this happens,
however, depends on the mixing between the upper and deep ocean. If we
stopped burning fossil fuels today, it would take about 600 years for
the ocean to absorb 80% of the excess CO&lt;sub&gt;2&lt;/sub&gt; in the
atmosphere. Even with the oceans taking up carbon as quickly as
possible we have enough fossil fuels to get the atmosphere up to 6
times the pre-industrial carbon dioxide concentration.&lt;/p&gt;
&lt;p&gt;This leads to many questions: how much will the Earth warm exactly?
Where will this warming happen? How does this affect sea levels? Rain?
Civilization? The basic science behind these is well-developed, but
the details and granularity we need to answer these questions requires
a deeper understanding.&lt;/p&gt;
&lt;p&gt;People started thinking about the science of global warming in the
19th century, but we didn't really have the data until the 70's and
80's to verify that, indeed, atmospheric CO&lt;sub&gt;2&lt;/sub&gt; was rising and
the global temperature with it.&lt;/p&gt;
&lt;p&gt;Between 1920 and 2005 the temperature has gone up 1 C. There was a
pause from about 1940 to 1970 because burning coal releases sulfur
compounds which reflect the sun, but then this mitigating effect was
overpowered by increased CO&lt;sub&gt;2&lt;/sub&gt; and thus we see more
temperature rise.&lt;/p&gt;
&lt;p&gt;Other complicating factors include the behavior of water vapor,
another strong greenhouse gas, in a warmer atmosphere, and the
combined warming/cooling effect of clouds. Clouds both insulate the
Earth and reflect sunlight, and the extent to which these balance each
other out is determined by the type of cloud. There are many other
complications as well in the problem of determining exactly what
happens to the Earth at +2 C or +4 C.&lt;/p&gt;
&lt;p&gt;We do know that it is something of geologic proportion happening on a
human time-scale. In the distant future climate scientists will be
left to puzzle over this abrupt spike in atmospheric carbon.&lt;/p&gt;
&lt;h3&gt;&lt;a name="1.13"&lt;/a&gt;1.13 - The Fate of the Earth and the Lifetime of Biospheres&lt;/h3&gt;
&lt;p&gt;No place can be habitable forever. Eventually the Sun will become a
red giant and engulf the Earth. Long before that it will be too bright
for our weathering process to compensate and we'll run into a runaway
greenhouse effect. Even before then, to maintain a habitable
temperature we'd need incredibly low amounts of atmospheric
CO&lt;sub&gt;2&lt;/sub&gt;, which cripples photosynthesis.&lt;/p&gt;
&lt;p&gt;Alternatively, we could run out of CO&lt;sub&gt;2&lt;/sub&gt; outgassing from the
Earth, and as we bury it all in the crust the Earth will freeze over.&lt;/p&gt;
&lt;p&gt;And that's why I'm reading this book, because I want to learn more
about this crazy world we live in and maybe figure out ways to keep it
healthy.&lt;/p&gt;</summary></entry><entry><title>The Speed of News</title><link href="http://www.johnxia.me/speed-of-news.html" rel="alternate"></link><updated>2014-11-23T00:00:00-06:00</updated><author><name>John Xia</name></author><id>tag:www.johnxia.me,2014-11-23:speed-of-news.html</id><summary type="html">&lt;p&gt;In college, I was fortunate enough to take a course on Sumerian
literature from &lt;a href="http://nelc.uchicago.edu/faculty/woods"&gt;Christopher Woods&lt;/a&gt;. We learned, among other
things, that in ancient Sumeria places that were far away were also
somehow farther in the past. This is roughly similar to the
correspondence between space and time which we study in
relativity. Why did the Sumerians find space-time unification so
natural? In my &lt;a href="/misc/NEHC_final.pdf"&gt;final paper&lt;/a&gt;, I argued that at the core of both
conceptions of space-time was the limited speed of information. In
ancient Sumeria, the speed of information was much slower than the
speed of light, and thus the time-bending effects of space were more
evident. Fortunately, Dr. Woods was a physics student in his youth and
let me get away with writing 10 pages about physics for my
Civilization Studies course.&lt;/p&gt;
&lt;p&gt;Several years later and a couple weeks ago, I participated in the
&lt;a href="https://hack.uchicago.edu"&gt;hack@UChicago&lt;/a&gt; Fall Hackathon on a whim. I was tooting around
after the workshops, trying to figure out what to make, when I
remembered that paper.&lt;/p&gt;
&lt;p&gt;I decided to make a &lt;a href="/relativity"&gt;map&lt;/a&gt; that would let you see what
sort of news you would be hearing from around the world if news
traveled at human speeds. The blue (draggable) marker is your current
location. You can click the map to find the news that you would be
hearing from there. There's a dropdown menu with different news
speeds.&lt;/p&gt;
&lt;p&gt;To make the map, I used a simple &lt;a href="http://leafletjs.com/"&gt;Leaflet&lt;/a&gt; map with a &lt;a href="http://mapbox.com/"&gt;Mapbox&lt;/a&gt;
tile layer.  I use the Mapbox geocoder to find the location of your
click; it is, regrettably, of little use outside of the United States
and southern Canada. I use the &lt;a href="http://developer.nytimes.com/docs/read/article_search_api_v2"&gt;New York Times Article Search API&lt;/a&gt; to
find news from that location; it has similar regional
problems. Unfortunately the Google News API was deprecated long ago.&lt;/p&gt;</summary></entry><entry><title>Animusic</title><link href="http://www.johnxia.me/animusic.html" rel="alternate"></link><updated>2014-06-29T00:00:00-05:00</updated><author><name>John Xia</name></author><id>tag:www.johnxia.me,2014-06-29:animusic.html</id><summary type="html">&lt;p&gt;This year for the
&lt;a href="http://scavhunt.uchicago.edu/list2014_2final.pdf"&gt;Scavenger Hunt&lt;/a&gt; I
mostly worked on this item:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;49. Bring us an Animusic-style instrument that plays itself. Once
activated, it should perform, unaided, a composition of no less than
90 seconds. While your device may have electronic components, it must
not produce electronic
music. [175 points. 50 bonus points if the music is played by multiple distinct mechanisms that join in gradually as it proceeds]&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;I saw this item at around 3 in the morning on Thursday, a few hours
after the craziness of list release. It grabbed my attention, both
because I knew I was expected to do it and because instruments have
fascinated me for some time, though I'd never gathered the gumption to
make anything more than a simple didgeridoo. So I cast around in my
mind for ideas on how to make something like this in the next few
days. First I had to know what the judges wanted, so I looked up the
source material on YouTube:&lt;/p&gt;
&lt;iframe width="560" height="315" src="//www.youtube.com/embed/hyCIpKAIFyo" frameborder="0" allowfullscreen&gt;&lt;/iframe&gt;

&lt;p&gt;Clearly, I needed some sort of mechanical actuator. Luckily, I had
kept some solenoids from my failed attempt at a water curtain
in 2013. Another quick YouTube search confirmed that it was possible
for solenoids to hit things hard enough to make sounds. Unfortunately
the solenoids I had were pulling solenoids, which are not optimal for
striking things. So I modeled a simple lever that the solenoid could
pull on, and a mount to keep everything in line.&lt;/p&gt;
&lt;p&gt;I cut them out the next morning on the lasercutter at the
&lt;a href="http://arts.uchicago.edu/hack-arts-lab-hal"&gt;Hack Arts Lab&lt;/a&gt;. Unfortunately,
I had forgotten to get materials, so I had to use the scrap in the
shop. I ended up cutting the main levers out of 3/4" thick plywood,
which required 3 passes at high power and low speed to get
through. Even then I had to use a Dremel to fully separate the pieces
from the stock.&lt;/p&gt;
&lt;p&gt;Some judicious application of superglue to skateboard bearings
ensued. I like using skateboard bearings for moving parts because
they're easy to get and relatively cheap. They also fit great on
things that are 5/16" in diameter, such as Bic pens. I like superglue
because I like taking risks and do not know fear.&lt;/p&gt;
&lt;p&gt;Once the superglue dried, I hooked up the whole apparatus to an
Arduino. The solenoids ran on 12V and 1.2A, which is far more than the
Arduino can output, so I needed to use some power transistors and an
external power source. Fortunately, I had planned ahead and converted
an old computer power supply into a serviceable benchtop power supply,
with binding posts for +12V, +5V, +3.3V, -5V, -12V, and GND. It even
had fancy things like short protection and everything! I got the power
transistors from RadioShack. Fat little suckers the size of your
fingernail, rated for 90W.&lt;/p&gt;
&lt;p&gt;After all the wiring was sorted it was relatively simple to get the
lever to move. All I had to do was send a 5V, 20ms pulse to the base
voltage on the transistor. Even with my limited knowledge of C I was
able to manage that.&lt;/p&gt;
&lt;p&gt;&lt;img src="images/animusic/animusic_arm.jpg"/&gt;&lt;/p&gt;
&lt;p&gt;It remained to wire up several more solenoid-lever modules so we could
play multiple instruments, and have some sort of method for writing
music. I ran into some issues which were solved by adding a '\0' to
the end of a string and felt like a greenhorn, but it all came
together pretty quickly.&lt;/p&gt;
&lt;p&gt;My friend Zach, an incredibly talented drummer (and the captain of our
team), brought over his drumset on Saturday night. We spied some large
pieces of MDF that nobody was using, and made a nice big base for
everything. By 6:30 in the morning we had everything wired up and
ready. Zach took a quick nap and about half an hour later we had this:&lt;/p&gt;
&lt;iframe width="560" height="315" src="//www.youtube.com/embed/w9Puv_iJRiE" frameborder="0" allowfullscreen&gt;&lt;/iframe&gt;

&lt;p&gt;We sat there watching it loop over and over, sleep-deprived,
triumphant, shocked and awed by our own magnificence. A teammate
snored loudly on the couch, somehow sleeping through everything.&lt;/p&gt;
&lt;p&gt;Then Zach scrapped all the music and re-wrote
it. &lt;a href="http://scavjudges.tumblr.com/post/85751911609/another-fabulous-completion-of-item-49-by-max"&gt;Here&lt;/a&gt;
is the final result.&lt;/p&gt;</summary><category term="Scav"></category></entry><entry><title>Ordered and Indetermined</title><link href="http://www.johnxia.me/ordered-indetermined.html" rel="alternate"></link><updated>2014-05-20T11:30:00-05:00</updated><author><name>John Xia</name></author><id>tag:www.johnxia.me,2014-05-20:ordered-indetermined.html</id><summary type="html">&lt;p&gt;Another project for my Data and Algorithms in Art class was to make
something "Ordered and Indetermined." This phrase was pretty much left
up to interpretation. I made some animations in JavaScript - this was
pretty much my introduction to the language. Screenshots follow.&lt;/p&gt;
&lt;p&gt;My first idea was to make a juggling siteswap visualizer, which the
professor thought was uninteresting. So I stopped at making bouncing
blocks. I wondered what it would look like if I just made a ton of
bouncing rectangles:&lt;/p&gt;
&lt;p&gt;&lt;a href="/ordered_indetermined/juggle.html"&gt;
&lt;img src="/images/ordered-indetermined/juggle-view.jpg" style="width:400px;"&gt;
&lt;div class="caption"&gt;Click for animation...&lt;/div&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;The next idea, which I eventually presented in class, was
"ElevatorCorp", an idealized simulation of an office building where
all the workers do is ride elevators all day. I used
&lt;a href="http://threejs.org/"&gt;three.js&lt;/a&gt; to talk to WebGL.&lt;/p&gt;
&lt;p&gt;&lt;a href="/ordered_indetermined/elevators.html"&gt;
&lt;img src="/images/ordered-indetermined/elevatorcorp.jpg"&gt;
&lt;/a&gt;&lt;/p&gt;</summary></entry><entry><title>HvZ Catapult</title><link href="http://www.johnxia.me/hvz-catapult.html" rel="alternate"></link><updated>2014-05-20T00:00:00-05:00</updated><author><name>John Xia</name></author><id>tag:www.johnxia.me,2014-05-20:hvz-catapult.html</id><summary type="html">&lt;p&gt;For my last game of &lt;a href="http://www.uchicagohvz.org"&gt;Humans vs. Zombies&lt;/a&gt; I
decided that I would utilize the least effective strategy possible. I
optimized my weaponry for highest visibility, lowest mobility, and
lowest zombie-killing ability.&lt;/p&gt;
&lt;p&gt;So, naturally, I went to the shop, found some scrap wood, and threw
together a back-mounted catapult, powered by twisted up bandanas of
HvZ's past. When that proved to be a little bit too pathetic I added
some rubber bands, increasing the range to about 30 feet. To defend
myself from zombies I needed to either set the catapult on the ground,
or get a nearby friend to be my gunner as I crouched down.&lt;/p&gt;
&lt;p&gt;I did not tag any zombies with this, though not for lack of trying. My
friend and I went hunting for them on my way to class - the zombie who
tagged me didn't even realize I was playing until we started hooting
and hollering and gently lobbing socks at him.&lt;/p&gt;
&lt;p&gt;&lt;img src="/images/hvz-catapult/catapult-1.jpg"/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src="/images/hvz-catapult/catapult-2.jpg"/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src="/images/hvz-catapult/catapult-3.jpg"/&gt;&lt;/p&gt;</summary></entry><entry><title>Water Blob</title><link href="http://www.johnxia.me/water-blob.html" rel="alternate"></link><updated>2014-05-20T00:00:00-05:00</updated><author><name>John Xia</name></author><id>tag:www.johnxia.me,2014-05-20:water-blob.html</id><summary type="html">&lt;p&gt;&lt;img src="images/water-blob/projection-far.JPG"/&gt;&lt;/p&gt;
&lt;p&gt;This quarter I am in &lt;a href="http://www.salavon.com"&gt;Jason Salavon&lt;/a&gt;'s Data
and Algorithm in Art class. This is a group project I did with
&lt;a href="http://clarekoury.tumblr.com"&gt;Clare Koury&lt;/a&gt; and Rebeca Carillo.&lt;/p&gt;
&lt;p&gt;We hooked up a PC fan to an Arduino and had it pulse briefly every
couple seconds. The fan had a magnet attached to it.&lt;/p&gt;
&lt;p&gt;&lt;img src="images/water-blob/pool-side.jpg"/&gt;&lt;/p&gt;
&lt;p&gt;On top of the fan we put a CD spindle with some
&lt;a href="http://www.instructables.com/id/Making-Rheoscopic-Fluid/?ALLSTEPS"&gt;rheoscopic fluid&lt;/a&gt;
in it. To agitate the liquid we used
&lt;a href="http://shapelock.com/"&gt;Shapelock&lt;/a&gt; to encase another magnet. Basically
we made a magnetic stirrer that only worked part of the time.&lt;/p&gt;
&lt;p&gt;&lt;img src="/images/water-blob/pool-top.jpg"/&gt;&lt;/p&gt;
&lt;p&gt;Here is a video of me discovering that the fan goes too fast for the
magnetic coupling. We solved this by pulsing the fan for about 40ms.&lt;/p&gt;
&lt;iframe width="420" height="315"
src="//www.youtube.com/embed/a6MGmMGI2XQ" frameborder="0"
allowfullscreen&gt;&lt;/iframe&gt;

&lt;p&gt;Then we made a pedestal for it, added a camera that provided a live
feed to a projector, and shined a bright light on it. All the pieces
came together in about half an hour. It working at all was pretty
surprising, I thought, so when people thought it had artistic merit as
well I was doubly suprised.&lt;/p&gt;
&lt;p&gt;Video:&lt;/p&gt;
&lt;iframe width="560" height="315" src="//www.youtube.com/embed/yCI13KS8Hrw" frameborder="0" allowfullscreen&gt;&lt;/iframe&gt;

&lt;p&gt;Additional images:&lt;/p&gt;
&lt;p&gt;&lt;img src="/images/water-blob/long-view.jpg"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src="/images/water-blob/apparatus.jpg"&gt;&lt;/p&gt;
&lt;p&gt;Pictures courtesy of Clare Koury.&lt;/p&gt;</summary></entry><entry><title>Swingy Arm Thing</title><link href="http://www.johnxia.me/swingy-arm-thing.html" rel="alternate"></link><updated>2014-02-07T00:00:00-06:00</updated><author><name>John Xia</name></author><id>tag:www.johnxia.me,2014-02-07:swingy-arm-thing.html</id><summary type="html">&lt;p&gt;I was in an art class last quarter, taught by &lt;a href="http://www.hannahgivler.com"&gt;Hannah Givler&lt;/a&gt;. &lt;/p&gt;
&lt;p&gt;This project is called "Module Matters". The prompt is to make a
reproducible module that can be used as a building block or an
integral part of a sculpture.&lt;/p&gt;
&lt;p&gt;Initially I was doing a bunch of research on 3-D tiling, but I got distracted by
magnets and started thinking about cool magnetic things instead. After some
excited discussion with my friend Rachel I decided to CAD up a swingy arm thing
with magnets. The basic idea is that I have a stack of rotating arms
with magnets in their ends - this causes them to be loosely coupled in that
strange magnetic way. Then when you move any of the arms, the others move with
it. It's reminiscent of the
&lt;a href="http://exs.exploratorium.edu/exhibits/magnetic-wave-machine/"&gt;Magnetic Wave Machine&lt;/a&gt;
at the Exploratorium.&lt;/p&gt;
&lt;p&gt;I printed out a template from SolidWorks and traced that onto a scrap piece of lauan.&lt;/p&gt;
&lt;p&gt;&lt;img src="images/swingy-arm-thing/paper-template.jpg"/&gt;&lt;/p&gt;
&lt;p&gt;I cut it out with a bandsaw, then sanded it down.  Then I nailed a few
pieces of scrap together, using the template as a template, to make a
quick jig so I can drill holes precisely.&lt;/p&gt;
&lt;p&gt;&lt;img src="images/swingy-arm-thing/lauan-in-jig.jpg"/&gt;&lt;/p&gt;
&lt;p&gt;Then I traced the template 10 times onto a 2'x4' piece of 3/4" plywood, and cut
them all out with a bandsaw.&lt;/p&gt;
&lt;p&gt;&lt;img src="images/swingy-arm-thing/rough-cut.jpg"/&gt;&lt;/p&gt;
&lt;p&gt;Then I used the template to route out the pieces smoothly, before
putting them in the drilling jig to make the pockets for the magnets
and bearings.  I used skateboard bearings, because they're cheap and
easy to find. They take 8mm axles, which is just a smidge bigger than
the 5/16" threaded rod I used for the axle. The arms were spaced out
with washers between the bearings and secured with a nut on each end.&lt;/p&gt;
&lt;p&gt;Here is some video of the first few arms, hanging out in the joining
table:&lt;/p&gt;
&lt;iframe width="560" height="315"
src="//www.youtube.com/embed/RuilwwdHYTs?rel=0" frameborder="0"
allowfullscreen&gt;&lt;/iframe&gt;

&lt;p&gt;I hadn't really thought about how I would mount the piece. After a
discussion with my professor I decided to cobble together some 2x4's
and call it a day. I'm not proud of that, but the truth is the truth.&lt;/p&gt;
&lt;p&gt;&lt;img src="images/swingy-arm-thing/finished.jpg"/&gt;&lt;/p&gt;</summary><category term="magnets"></category><category term="wood"></category></entry><entry><title>Bamboo Bike</title><link href="http://www.johnxia.me/bamboo-bike.html" rel="alternate"></link><updated>2013-09-05T00:00:00-05:00</updated><author><name>John Xia</name></author><id>tag:www.johnxia.me,2013-09-05:bamboo-bike.html</id><summary type="html">&lt;p&gt;In high school I built some bamboo bikes. The second one broke and I rebuilt it.&lt;/p&gt;
&lt;p&gt;Here are their stories.&lt;/p&gt;
&lt;h3&gt;v0.1&lt;/h3&gt;
&lt;p&gt;One day I was biking with my friend Chris. I said to him that we should build a
bamboo bike in the summer. He said that that was a great idea and that we should
do it.&lt;/p&gt;
&lt;p&gt;When summer started we bummed for bike parts around Palo Alto.&lt;/p&gt;
&lt;p&gt;Somebody gave us an old frame that had been in a crash.&lt;/p&gt;
&lt;p&gt;&lt;center&gt;
&lt;img src="images/bamboo-bike/broken-frame.jpg"  style="width: 400px;"/&gt;
&lt;/center&gt;&lt;/p&gt;
&lt;p&gt;We sawed the joints off.&lt;/p&gt;
&lt;p&gt;&lt;center&gt;
&lt;img src="images/bamboo-bike/joints.jpg"  style="width: 400px;"/&gt;
&lt;/center&gt;&lt;/p&gt;
&lt;p&gt;Then we went to a bamboo garden in the hills and got some bamboo.&lt;/p&gt;
&lt;p&gt;We heat-treated the bamboo, which both dries the bamboo and strengthens it. Then
we cut it into appropriate lengths and fit them onto the steel joints.&lt;/p&gt;
&lt;p&gt;&lt;center&gt;
&lt;img src="images/bamboo-bike/v01-layout.jpg"  style="width: 400px;"/&gt;
&lt;/center&gt;&lt;/p&gt;
&lt;p&gt;The bamboo was loose on the steel tubes, so we filled the space with expanding
foam. Then we mixed up some epoxy resin, soaked twine in it, and wrapped
that around the joints to strengthen them.&lt;/p&gt;
&lt;p&gt;The final product had some pretty wonky geometry, which was totally
different from what we had laid out earlier:&lt;/p&gt;
&lt;p&gt;&lt;center&gt;
&lt;img src="images/bamboo-bike/finished-v01.jpg"  style="width: 400px;"/&gt;
&lt;/center&gt;&lt;/p&gt;
&lt;p&gt;The bottom bracket holder was very low to the ground, resulting in low ground
clearance. I had to be very careful to avoid pedal strike. I resolved to use a
jig the next time around.&lt;/p&gt;
&lt;h3&gt;v0.2&lt;/h3&gt;
&lt;p&gt;The next summer, having learned many lessons, I built another bike.&lt;/p&gt;
&lt;p&gt;&lt;center&gt;
&lt;img src="images/bamboo-bike/finished-v02.jpg"  style="width: 400px;"/&gt;
&lt;/center&gt;&lt;/p&gt;
&lt;p&gt;I was happy enough to make an
&lt;a href="http://www.instructables.com/id/Bamboo-Bike-Frame/"&gt;Instructable&lt;/a&gt; about the
build process.&lt;/p&gt;
&lt;p&gt;I rode this daily for several months, then one day the bottom bracket joint
snapped as I was crossing a street. So I started thinking about the next one.&lt;/p&gt;
&lt;p&gt;&lt;center&gt;
&lt;img src="images/bamboo-bike/riding-v02.jpg"  style="width: 400px;"/&gt;
&lt;/center&gt;&lt;/p&gt;
&lt;h2&gt;v0.3&lt;/h2&gt;
&lt;p&gt;For this one I redid the joints that broke with carbon fiber:&lt;/p&gt;
&lt;p&gt;&lt;center&gt;
&lt;img src="images/bamboo-bike/finished-v03.jpg"  style="width: 400px;"/&gt;
&lt;/center&gt;&lt;/p&gt;
&lt;p&gt;First I tacked the joints back together. Then I built up the joints with
long-fiber Bondo, a two-part putty reinforced with fiberglass. I smoothed the
Bondo out with a Dremel, and started laminating the joint with carbon fiber.&lt;/p&gt;
&lt;p&gt;I found a vacuum pump, made an air filter with activated charcoal and a metal
can, and bought some trash-bags. Then I was able to do some
&lt;a href="http://ezinearticles.com/?Vacuum-Bagging-Carbon-Fiber-On-$50&amp;amp;id=674586"&gt;crude vacuum-bagging&lt;/a&gt;
of the joints.&lt;/p&gt;
&lt;p&gt;As I waited for the epoxy to cure, I thought of a couple other ways I could have
joined the bamboo - forming the joints with smooth Bondo, using small bamboo
gussets, etc. The idea is to minimize the probability of kinks and air pockets
in the fiber by making the joint as smooth as possible. I'll have to test to see
which method works best.&lt;/p&gt;</summary><category term="bicycles"></category></entry><entry><title>Tensegrity</title><link href="http://www.johnxia.me/tensegrity.html" rel="alternate"></link><updated>2013-08-31T00:00:00-05:00</updated><author><name>John Xia</name></author><id>tag:www.johnxia.me,2013-08-31:tensegrity.html</id><summary type="html">&lt;p&gt;One day I was reminiscing about my childhood and remembered seeing a cool
sculpture made only with steel tubes and cable. A bit of Googling revealed that
this was a
&lt;a href="https://en.wikipedia.org/wiki/Tensegrity"&gt;tensegrity structure&lt;/a&gt;. Tensegrity is
cool because it uses cables and rods to make a stiff structure without having
the rods touch each other.&lt;/p&gt;
&lt;p&gt;I decided that I would make one myself. So for the next week or so, I got a few
forks every time I went to the dining hall. Some fishing-line and some dremeling ensued, and here is the result!&lt;/p&gt;
&lt;p&gt;&lt;center&gt;
&lt;img src="images/tensegrity/tensegrity.jpg" style="width: 400px;"/&gt;
&lt;/center&gt;&lt;/p&gt;</summary><category term='"art"'></category></entry><entry><title>Scav 2011-2013</title><link href="http://www.johnxia.me/scav.html" rel="alternate"></link><updated>2013-08-30T00:00:00-05:00</updated><author><name>John Xia</name></author><id>tag:www.johnxia.me,2013-08-30:scav.html</id><summary type="html">&lt;h3&gt;Introduction&lt;/h3&gt;
&lt;p&gt;Every year, I partake in a four-day journey into madness called Scav (short for
the University of Chicago Scavenger Hunt). There are several teams of a few
dozen each; on the Wednesday night before Mother's Day we gather to receive the
&lt;a href="http://scavhunt.uchicago.edu/list2014final.pdf"&gt;List&lt;/a&gt;, which contains around
300 eccentric items. Then we madly sprint to complete as many items as
possible. On Mother's Day itself we gather to show off what we have scraped
together.&lt;/p&gt;
&lt;p&gt;Here are a few of the items I've worked on through the years. They're
not... pretty. Think of them as early-stage prototypes.&lt;/p&gt;
&lt;h3&gt;2011&lt;/h3&gt;
&lt;p&gt;My first year. I didn't know that there was a "Big Projects" group specializing
in construction, so I signed up to take care of a page of the List. Here are
some of the items from my page.&lt;/p&gt;
&lt;h4&gt;The Lamp&lt;/h4&gt;
&lt;p&gt;&lt;em&gt;37. One of those cheap, many-headed colorful dorm floor lamps. [1 point
per head, 30 bonus points if they can move unaided, 10 bonus bonus
points if it is tearing apart a small ship]&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;center&gt;
&lt;img src="images/scav/lamp.jpg"  style="width: 400px;"/&gt;
&lt;/center&gt;&lt;/p&gt;
&lt;p&gt;The mechanism was inspired by toys that look like this:&lt;/p&gt;
&lt;p&gt;&lt;center&gt;
&lt;img src="images/scav/chicken-toy.jpg"  style="width: 400px;"/&gt;
&lt;/center&gt;&lt;/p&gt;
&lt;p&gt;You swing the ball around, pulling on the string going to each chicken's
head. This moves them up and down.&lt;/p&gt;
&lt;p&gt;We didn't have motors, so to "move the heads unaided" I used a pulley and a
weight. We didn't have those either. I rigged up a pulley with cardboard taped
to a pipe. This rested inside a larger section of pipe so it could spin
freely. The weight was three water bottles in a plastic bag. I added rubber
bands to add tension to the string and move the heads back to their initial
positions.&lt;/p&gt;
&lt;h4&gt;The Eyes&lt;/h4&gt;
&lt;p&gt;&lt;em&gt;40. Affix a pair of appropriately enormous googly eyes to the campus
building of your choice. [8 points]&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;center&gt;
&lt;img src="images/scav/eyes.jpg"  style="width: 400px;"/&gt;
&lt;/center&gt;&lt;/p&gt;
&lt;p&gt;We had planned on dangling them off the edge of the tower with wires. I
envisioned them swaying gently in the wind, pupils googling like mad for the
world to see. Getting these up wasn't hard - we just went up the stairs. Once we
got to the top, we found that the wind was too strong and the eyes flapped
wildly. Fortunately, we had duct tape and just leaned over the edge to secure
the eyes.&lt;/p&gt;
&lt;h3&gt;2012&lt;/h3&gt;
&lt;p&gt;This year, all the previous Big Projects folks had split, so I was heading up a
Big Projects team of one person (me). I holed up and worked on these items.&lt;/p&gt;
&lt;h4&gt;The Piano&lt;/h4&gt;
&lt;p&gt;&lt;em&gt;146. Play me a drink, Sam, for old times’ sake...on your piano that
dispenses a beverage component with every keystroke. Changing the
melody should change the mixology. Instruments and their compositions
will be judged both on the quality of the cocktails and the musicality
of their recipes. [250 points, 25 extra points if your keyboard can
play a different melody to create a different drink]&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;center&gt;
&lt;img src="images/scav/pianoclose.jpg"  style="width: 400px;"/&gt;&lt;/p&gt;
&lt;p&gt;It's a little bit hacked together.
&lt;/center&gt;&lt;/p&gt;
&lt;p&gt;I mounted bottles filled with liquor (or mixer) on axles so their neutral
position would be right-side-up. I found these
&lt;a href="http://www.sciplus.com/p/POWER-DOOR-LOCK_47851"&gt;automotive door lock actuators&lt;/a&gt;
at ASS that would push upwards a few inches when I applied a voltage across
them. I attached the bottles so they would tip when the actuators fired. I
hooked up wires to a mini keyboard, turning each key into a switch that
activated one of the bottles. Now each note played corresponded to some alcohol
poured! The alcohol went through a 10-inch funnel into a glass.&lt;/p&gt;
&lt;h4&gt;The Map&lt;/h4&gt;
&lt;p&gt;&lt;em&gt;264. King’s Landing and The Twins are all right, I guess, but we’d
rather see something a little more neo-Gothic. Produce a map of the U
of C campus that when triggered erects a clockwork version of a campus
building of your choice. [175 points]&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;We had to present this at 9:00 AM on Sunday. So we started at 6:00 that
morning. We had gears lying around, but no shafts. Luckily, the box of pens we
had bought were a great fit! So I got busy making a replica of the chapel I had
hung eyes from the year before.&lt;/p&gt;
&lt;p&gt;&lt;center&gt;
&lt;img src="images/scav/map.jpg"  style="width: 400px;"/&gt;&lt;/p&gt;
&lt;p&gt;One of many things we did not have time to make was a stand to hold it up.
&lt;/center&gt;&lt;/p&gt;
&lt;p&gt;Turns out, ours was the only one with a building that had moving gears on
it. However, the motor that was supposed to lift the building up from under the
map burned out when we were presenting.&lt;/p&gt;
&lt;p&gt;During these three hours I learned how hard it was to work with foamcore
poster-board. But I forgot all about that when I started on Aquagraphics in 2013.&lt;/p&gt;
&lt;h3&gt;2013&lt;/h3&gt;
&lt;p&gt;This year I assembled a Big Projects team! We could plan items together, build
them together, all that jazz. I spent a lot more time with the rest of the team,
helping people with their own technical items. This was much more fun than
working alone.&lt;/p&gt;
&lt;h4&gt;The Liver&lt;/h4&gt;
&lt;p&gt;&lt;em&gt;84. Take us on a Fantastic Voyage through your team’s larger-than-life
model of a human organ. Your structure must be able to comfortably
accommodate at least four tourists at a time and present an accurate
and informative account of the organ’s inner workings. We’ll happily
enter the body part of your choice, but remember that our heart belongs
to the Franklin Institute. [150 points]&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;center&gt;
&lt;img src="images/scav/liver-whole.jpg"  style="width: 400px;"/&gt;&lt;/p&gt;
&lt;p&gt;Here we are, shooing people into the liver.
&lt;/center&gt;&lt;/p&gt;
&lt;p&gt;After much deliberation we settled on a liver. Because I like steel, we bought a
ton of electrical conduit and bent it into a frame. It was much lighter and
stiffer than a comparable wooden or PVC one. We covered it in about 80 feet of
chicken wire. When we started tarping the liver, we found that it was so light
that it blew away! So we got some rope and stakes to keep it on the ground.&lt;/p&gt;
&lt;p&gt;&lt;center&gt;
&lt;img src="images/scav/liver-internal.jpg"  style="width: 400px;"/&gt;
&lt;/center&gt;&lt;/p&gt;
&lt;p&gt;We filled the inside with clear plastic tubes to represent the tubes inside the
liver. We hooked up some "bodily fluids" to the tubes: a bottle of sweet tea
vodka for bile and red Gatorade for blood. We also had long twisty balloons so
visitors could "fold their own proteins."&lt;/p&gt;
&lt;p&gt;&lt;center&gt;
&lt;img src="images/scav/liver-faces.jpg" 
style="width: 400px;"/&gt;&lt;/p&gt;
&lt;p&gt;Some of the people who helped!
&lt;/center&gt;&lt;/p&gt;
&lt;h4&gt;The Aquagraphics Curtain&lt;/h4&gt;
&lt;p&gt;&lt;em&gt;208. An aquagraphic-style water curtain that displays your team name or
logo. [250 points]&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://http://jdangerx.github.io/blog/208.html"&gt;See my other post.&lt;/a&gt;&lt;/p&gt;</summary><category term="scav"></category></entry><entry><title>FourthApp</title><link href="http://www.johnxia.me/fourth-app.html" rel="alternate"></link><updated>2013-08-13T00:00:00-05:00</updated><author><name>John Xia</name></author><id>tag:www.johnxia.me,2013-08-13:fourth-app.html</id><summary type="html">&lt;p&gt;I'm currently an intern at
&lt;a href="http://www.missionst.com/"&gt;Mission St. Manufacturing&lt;/a&gt;. We're a 3D
printing company that's trying to streamline 3D printing. If you're
not familiar with 3D printers, imagine building up an object with a
hot glue gun, carefully squeezing out layer upon layer of
plastic. That is exactly what a 3D printer does.&lt;/p&gt;
&lt;p&gt;One of the problems we are fixing is that you have to jump through a
ton of hoops to print something. Making a 3D model is hard. Once you
have a model you have to turn that into instructions for your printer,
and once you have the instructions, you have to actually print
them. We hide most of this on our server so nobody has to deal
with it.&lt;/p&gt;
&lt;p&gt;You can't hide the actual modeling, so we're making tablet apps that
make simple 3D modeling &lt;em&gt;really&lt;/em&gt; simple.  We've got a few in the
works. Let's take a look at one that turns your finger drawings into
real things that you can hold. Its code name is FourthApp.&lt;/p&gt;
&lt;p&gt;First you draw something. It's kind of like Paint. No spray-can, though.&lt;/p&gt;
&lt;p&gt;&lt;center&gt;
&lt;img src="images/fourth-app/drawView.jpg"  style="width: 400px;"/&gt;
&lt;/center&gt;&lt;/p&gt;
&lt;p&gt;Then you hit print preview. We turn it into a 3D model and send it
back down for your perusal:&lt;/p&gt;
&lt;p&gt;&lt;center&gt;
&lt;img src="images/fourth-app/previewView.jpg"  style="width: 400px;"/&gt;
&lt;/center&gt;&lt;/p&gt;
&lt;p&gt;If it turns out satisfactorily you can choose to print your part:&lt;/p&gt;
&lt;p&gt;&lt;center&gt;
&lt;img src="images/fourth-app/printing.jpg"  style="width: 400px;"/&gt;
&lt;/center&gt;&lt;/p&gt;
&lt;p&gt;Which ends up looking like this:&lt;/p&gt;
&lt;p&gt;&lt;center&gt;
&lt;img src="images/fourth-app/part.jpg"  style="width: 400px;"/&gt;
&lt;/center&gt;&lt;/p&gt;
&lt;p&gt;You are, no doubt, curious as to how this all works. I'd love to tell
you, but first we need to understand the basics. Namely, what does
making a 3D model entail? Conceptually, it's pretty easy - you take a
picture, figure out what you want the model to look like, and draw
triangles on the model until it's all covered, like this:&lt;/p&gt;
&lt;p&gt;&lt;center&gt;
&lt;img src="images/fourth-app/meshlab.jpg" alt="This is grabbed from an
open-source program called MeshLab." style="width: 400px;"/&gt;
&lt;/center&gt;&lt;/p&gt;
&lt;p&gt;Once you have that, you can cut it into thin horizontal slices; then
you can write instructions to tell the printer how to move on each
layer. This process is called &lt;em&gt;toolpath generation&lt;/em&gt; or &lt;em&gt;slicing&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;However, the devil is in the details. We tried several different ways
of making models, which can be lumped into one of two categories:
path-based and image-based.&lt;/p&gt;
&lt;p&gt;We started with a path-based method, which works like this: we track
the path the finger traces across the screen. Then we draw two paths
on either side, marking the bottom edges of the model. Then we play
connect-the-dots and make the triangles for the bottom face. Next we
make a copy of the bottom and move it up to make the top
face. Finally, we connect the top and bottom faces to each other to
make the sides. Ta-da!&lt;/p&gt;
&lt;p&gt;This runs into some problems, though, when the path crosses over
itself. We end up with some triangles inside the model! The internal
triangles make it hard to determine the border of each slice. This
really messes with your toolpaths. We decided to try to detect the
self-intersections. This worked by checking each edge against each
other edge to see if they crossed. This is slow - when you start
drawing complex pictures, the brush noticeably lags behind your finger
as we accumulate more edges to check.&lt;/p&gt;
&lt;p&gt;While trying to fix the code we started thinking about other
approaches. What if we took a screenshot and turned that into a 3D
model? We'd avoid the self-intersecting paths altogether - once you
have painted an area black, it doesn't matter if you go over it
again. It will still be black. It will be black until the end-times,
no matter how many times you draw over it. This was really exciting!
So we started hacking on it.&lt;/p&gt;
&lt;p&gt;Soon we had something that kind of worked. The idea is pretty simple:
you look at each pixel in the picture, keeping track of how dark each
pixel is. This will correspond to height later. Each pixel has a 2D
position already. You can put that together with the heights you just
found to get a bunch of 3D points. Then you draw a bunch of triangles
in a giant game of connect-the-three-dimensional-dots, and voila! You
have a 3D model!&lt;/p&gt;
&lt;p&gt;This method makes a lot of triangles. In fact, it makes about 10 times
as many as the last one. This means it's 10 times bigger, 10 times
harder to send over the Internet, 10 times harder to slice. To
alleviate these problems, we shrunk down the resolution of the images,
but ran into another snag: at such low resolutions, the beautiful,
organic curves (sensuous, even) that people were drawing became jagged
pixelated blocks. That can be helpful if you are trying to print out
characters from Super Mario, but that's not exactly what we want.  We
tried to find a happy medium between slow and pretty, but it wasn't
there.&lt;/p&gt;
&lt;p&gt;Now we've hacked together another solution. The benefit of the
path-based approach is that the model itself is much smaller and
simpler; the benefit of the image-based approach is that we don't have
to deal with self-intersecting curves. A hybrid solution gets us both
of these. The app sends us a picture of what the user has drawn. Then
we use a nice program called
&lt;a href="http://potrace.sourceforge.net/"&gt;potrace&lt;/a&gt; to trace the edges of the
drawing. From there, we connect the dots and get a model which is as
simple and smooth as a path-based one without any of the
self-intersection issues.&lt;/p&gt;
&lt;p&gt;Of course, there's still ways to improve. I'm working on an extension
to this hybrid method that will let you use different shades of grey
in your drawing to indicate different thicknesses. We can trace those
edges with potrace to get the profile of each slice. Then we can stack
them on top of each other to create the model. This lets you make
things that are bumpy on top. You'd &lt;em&gt;really&lt;/em&gt; be getting somewhere.&lt;/p&gt;
&lt;p&gt;Astute readers may notice that we don't need to turn the picture into
triangles to make toolpaths. All the printer does is fill in one
horizontal slice of the object and move up, so if we know what each
slice looks like we can make toolpaths straight from that. Luckily,
the different levels of grey represent exactly that! Instead of
stacking the slices, turning that into triangles, then slicing up the
triangles again, we can skip that middle step. This business of
translating between slices and triangles gets into deep waters very
quickly, though, and deserves its own post.&lt;/p&gt;</summary><category term="3D printing"></category><category term="code"></category></entry></feed>